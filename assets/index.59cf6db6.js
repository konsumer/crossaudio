import{r as e}from"./___vite-browser-external_commonjs-proxy.f242bfbd.js";import{b as t}from"./vendor.8333cade.js";var n=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=t(r,r,n);return n},r=n;function i(e){return!!e&&(!!Number.isFinite(e.sampleRate)&&(!!Array.isArray(e.channelData)&&!!e.channelData.every((function(e){return e instanceof Float32Array}))))}function a(e){if(i(e)){var t=e.channelData.length;return{numberOfChannels:t,length:t?e.channelData[0].length:0,sampleRate:e.sampleRate,channelData:e.channelData}}if(o(e)){var n=e.numberOfChannels,a=e.sampleRate,u=r(n,(function(t,n){return e.getChannelData(n)}));return{numberOfChannels:n,length:n?u[0].length:0,sampleRate:a,channelData:u}}return{numberOfChannels:0,length:0,sampleRate:0,channelData:[]}}function o(e){return!!e&&("number"==typeof e.numberOfChannels&&("number"==typeof e.sampleRate&&"function"==typeof e.getChannelData))}var u={isAudioData:i,toAudioData:a,isAudioBuffer:o,toAudioBuffer:function(e,t){var n=new t({numberOfChannels:(e=a(e)).numberOfChannels,length:e.length,sampleRate:e.sampleRate}),r=(n._impl||n).audioData;return r.numberOfChannels=e.numberOfChannels,r.length=e.length,r.sampleRate=e.sampleRate,r.channelData=e.channelData,n}},s={exports:{}},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var c=e,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._emitter=new c.EventEmitter}return l(e,[{key:"addEventListener",value:function(e,t){"function"==typeof t&&this._emitter.addListener(e,t)}},{key:"removeEventListener",value:function(e,t){"function"==typeof t&&this._emitter.removeListener(e,t)}},{key:"replaceEventListener",value:function(e,t,n){this.removeEventListener(e,t),this.addEventListener(e,n)}},{key:"dispatchEvent",value:function(e){this._emitter.emit(e.type,e)}}]),e}();var h=n,p=function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numberOfChannels=0|t,this.length=0|n,this.sampleRate=0|r,this.channelData=h(this.numberOfChannels,(function(){return new Float32Array(i.length)}))},m={};var y=function(e,t,n){return Math.max(t,Math.min(e,n))};var _=function(e,t){return void 0!==e?e:t};var b=function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})};var d=function(e,t){if(e.fill)return e.fill(t);for(var n=0,r=e.length;n<r;n++)e[n]=t;return e};var v=function(e,t,n,r){if(e.fill)return e.fill(t,n,r);for(var i=n;i<r;i++)e[i]=t;return e},g=y;var w=function(e,t,n){return g((e-t)/(n-t),0,1)};var O=function(e){return Array.isArray(e)?e:[e]};var k=function(e){if(Number.isFinite(+e))return Math.max(0,+e);var t=(""+e).match(/^(?:(\d\d+):)?(\d\d?):(\d\d?(?:\.\d+)?)$/);return t?3600*(0|+t[1])+60*+t[2]+ +t[3]:0};var C=function(e){return 20*Math.log10(e)};var P=function(e){return Math.sqrt(Math.pow(10,e/10))};var E=function(e){return e._impl||e};var T=function(e){return+e||0};var M=function(e,t){return 1<<(t=t||Math.round)(Math.log(e)/Math.log(2))};var S=function(e){return 8===(e|=0)||16===e||32===e?e:16},D={MIN_SAMPLERATE:3e3,MAX_SAMPLERATE:192e3,MIN_NUMBER_OF_CHANNELS:1,MAX_NUMBER_OF_CHANNELS:32,MIN_BLOCK_SIZE:8,MAX_BLOCK_SIZE:1024},A=y,j=M,x=D.MIN_BLOCK_SIZE,I=D.MAX_BLOCK_SIZE;var R=function(e){return A(j(e),x,I)},F=T,N=y,V=D.MAX_NUMBER_OF_CHANNELS;var L=function(e){return 0|N(F(e),1,V)},z=T,U=y,B=D.MIN_SAMPLERATE,$=D.MAX_SAMPLERATE;var q=function(e){return 0|U(z(e),B,$)};m.clamp=y,m.defaults=_,m.defineProp=b,m.fill=d,m.fillRange=v,m.normalize=w,m.toArrayIfNeeded=O,m.toAudioTime=k,m.toDecibel=C,m.toGain=P,m.toImpl=E,m.toNumber=T,m.toPowerOfTwo=M,m.toValidBitDepth=S,m.toValidBlockSize=R,m.toValidNumberOfChannels=L,m.toValidSampleRate=q;var W={SPEAKERS:"speakers",DISCRETE:"discrete"},X=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var G=p,Y=m.fill,H=W.DISCRETE,Z={},K=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioData=new G(t,n,r),this.isSilent=!0,this.channelInterpretation=H}return X(e,[{key:"getChannelInterpretation",value:function(){return this.channelInterpretation}},{key:"setChannelInterpretation",value:function(e){this.channelInterpretation=e}},{key:"getNumberOfChannels",value:function(){return this.audioData.numberOfChannels}},{key:"setNumberOfChannels",value:function(t){var n=new e(t,this.getLength(),this.getSampleRate());n.channelInterpretation=this.channelInterpretation,n.sumFrom(this),this.audioData=n.audioData}},{key:"getLength",value:function(){return this.audioData.length}},{key:"getSampleRate",value:function(){return this.audioData.sampleRate}},{key:"getChannelData",value:function(){return this.audioData.channelData}},{key:"getMutableData",value:function(){return this.isSilent=!1,this.audioData.channelData}},{key:"zeros",value:function(){if(!this.isSilent)for(var e=this.audioData.channelData,t=0,n=e.length;t<n;t++)Y(e[t],0);this.isSilent=!0}},{key:"copyFrom",value:function(e){for(var t=e.audioData.channelData,n=this.audioData.channelData,r=n.length,i=0;i<r;i++)n[i].set(t[i]);this.isSilent=e.isSilent}},{key:"copyFromWithOffset",value:function(e,t){var n=e.audioData.channelData,r=this.audioData.channelData,i=r.length;t|=0;for(var a=0;a<i;a++)r[a].set(n[a],t);this.isSilent=this.isSilent&&e.isSilent}},{key:"sumFrom",value:function(e){if(!e.isSilent){var t=e.audioData.channelData,n=this.audioData.channelData;this._sumFrom(t,n,e.getLength())}}},{key:"sumFromWithOffset",value:function(e,t){if(!e.isSilent){t|=0;var n=e.audioData.channelData,r=this.audioData.channelData.map((function(e){return e.subarray(t)}));this._sumFrom(n,r,e.getLength())}}},{key:"_sumFrom",value:function(e,t,n){var r=void 0,i=1e3*e.length+t.length;this.channelInterpretation===H?i+=2e6:i+=1e6,r=Z[i]||Z[0],this.isSilent&&r.set&&(r=r.set),r(e,t,n),this.isSilent=!1}}]),e}();Z[0]=function(e,t,n){for(var r=Math.min(e.length,t.length),i=0;i<r;i++)for(var a=0;a<n;a++)t[i][a]+=e[i][a]},Z[0].set=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)t[r].set(e[r])},Z[1001001]=function(e,t,n){for(var r=t[0],i=e[0],a=0;a<n;a++)r[a]+=i[a]},Z[1001001].set=function(e,t){t[0].set(e[0])},Z[2001001]=Z[1001001],Z[2001001].set=Z[1001001].set,Z[1001002]=function(e,t,n){for(var r=t[0],i=t[1],a=e[0],o=0;o<n;o++)r[o]+=a[o],i[o]+=a[o]},Z[1001002].set=function(e,t){t[0].set(e[0]),t[1].set(e[0])},Z[1001004]=Z[1001002],Z[1001004].set=Z[1001002].set,Z[1001006]=function(e,t,n){for(var r=t[2],i=e[0],a=0;a<n;a++)r[a]+=i[a]},Z[1001006].set=function(e,t){t[2].set(e[0])},Z[1002002]=function(e,t,n){for(var r=t[0],i=t[1],a=e[0],o=e[1],u=0;u<n;u++)r[u]+=a[u],i[u]+=o[u]},Z[1002002].set=function(e,t){t[0].set(e[0]),t[1].set(e[1])},Z[2002002]=Z[1002002],Z[2002002].set=Z[1002002].set,Z[1002004]=Z[1002002],Z[1002004].set=Z[1002002].set,Z[1002006]=Z[1002004],Z[1002006].set=Z[1002004].set,Z[1004006]=function(e,t,n){for(var r=t[0],i=t[1],a=t[4],o=t[5],u=e[0],s=e[1],l=e[2],c=e[3],f=0;f<n;f++)r[f]+=u[f],i[f]+=s[f],a[f]+=l[f],o[f]+=c[f]},Z[1004006].set=function(e,t){t[0].set(e[0]),t[1].set(e[1]),t[4].set(e[2]),t[5].set(e[3])},Z[1002001]=function(e,t,n){for(var r=t[0],i=e[0],a=e[1],o=0;o<n;o++)r[o]+=.5*(i[o]+a[o])},Z[1004001]=function(e,t,n){for(var r=t[0],i=e[0],a=e[1],o=e[2],u=e[3],s=0;s<n;s++)r[s]+=.25*(i[s]+a[s]+o[s]+u[s])},Z[1006001]=function(e,t,n){for(var r=t[0],i=e[0],a=e[1],o=e[2],u=e[4],s=e[5],l=0;l<n;l++)r[l]+=.7071*(i[l]+a[l])+o[l]+.5*(u[l]+s[l])},Z[1004002]=function(e,t,n){for(var r=t[0],i=t[1],a=e[0],o=e[1],u=e[2],s=e[3],l=0;l<n;l++)r[l]+=.5*(a[l]+u[l]),i[l]+=.5*(o[l]+s[l])},Z[1006002]=function(e,t,n){for(var r=t[0],i=t[1],a=e[0],o=e[1],u=e[2],s=e[4],l=e[5],c=0;c<n;c++)r[c]+=a[c]+.7071*(u[c]+s[c]),i[c]+=o[c]+.7071*(u[c]+l[c])},Z[1006004]=function(e,t,n){for(var r=t[0],i=t[1],a=t[2],o=t[3],u=e[0],s=e[1],l=e[2],c=e[4],f=e[5],h=0;h<n;h++)r[h]+=u[h]+.7071*l[h],i[h]+=s[h]+.7071*l[h],a[h]+=c[h],o[h]+=f[h]};var Q=K,J={MAX:"max",CLAMPED_MAX:"clamped-max",EXPLICIT:"explicit"},ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var te=Q,ne=m.toValidNumberOfChannels,re=J.CLAMPED_MAX,ie=J.EXPLICIT,ae=W.SPEAKERS;function oe(e,t){if(t instanceof WeakSet){if(t.has(e))return!1;t.add(e)}else{if(-1!==t.indexOf(e))return!1;t.push(e)}return!0}function ue(e,t){if(t instanceof WeakSet){if(!t.has(e))return!1;t.delete(e)}else{var n=t.indexOf(e);if(-1===n)return!1;t.splice(n,1)}return!0}function se(e,t,n){return ue(e,t)&&oe(e,n)}var le=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.node,r=t.index,i=t.numberOfChannels,a=t.channelCount,o=t.channelCountMode;this.node=n,this.index=0|r,this.bus=new te(i,n.blockSize,n.sampleRate),this.bus.setChannelInterpretation(ae),this.outputs=[],this._disabledOutputs=new WeakSet,this._channelCount=0|a,this._channelCountMode=o}return ee(e,[{key:"getChannelCount",value:function(){return this._channelCount}},{key:"setChannelCount",value:function(e){var t=ne(e);t!==this._channelCount&&(this._channelCount=t,this.updateNumberOfChannels())}},{key:"getChannelCountMode",value:function(){return this._channelCountMode}},{key:"setChannelCountMode",value:function(e){e!==this._channelCountMode&&(this._channelCountMode=e,this.updateNumberOfChannels())}},{key:"getChannelInterpretation",value:function(){return this.bus.getChannelInterpretation()}},{key:"setChannelInterpretation",value:function(e){this.bus.setChannelInterpretation(e)}},{key:"getNumberOfChannels",value:function(){return this.bus.getNumberOfChannels()}},{key:"computeNumberOfChannels",value:function(){if(this._channelCountMode===ie)return this._channelCount;var e=this.outputs.reduce((function(e,t){return Math.max(e,t.getNumberOfChannels())}),1);return this._channelCountMode===re?Math.min(this._channelCount,e):e}},{key:"updateNumberOfChannels",value:function(){var e=this.computeNumberOfChannels();e!==this.bus.getNumberOfChannels()&&(this.bus.setNumberOfChannels(e),this.node.channelDidUpdate(e))}},{key:"isEnabled",value:function(){return 0!==this.outputs.length}},{key:"enableFrom",value:function(e){se(e,this._disabledOutputs,this.outputs)&&this.inputDidUpdate()}},{key:"disableFrom",value:function(e){se(e,this.outputs,this._disabledOutputs)&&this.inputDidUpdate()}},{key:"connectFrom",value:function(e){e.isEnabled()?oe(e,this.outputs)&&this.inputDidUpdate():oe(e,this._disabledOutputs)}},{key:"disconnectFrom",value:function(e){e.isEnabled()?ue(e,this.outputs)&&this.inputDidUpdate():ue(e,this._disabledOutputs)}},{key:"inputDidUpdate",value:function(){this.updateNumberOfChannels(),0===this.outputs.length?this.node.disableOutputsIfNecessary():this.node.enableOutputsIfNecessary()}},{key:"isConnectedFrom",value:function(e){var t=this;return this.outputs.some((function(t){return t.node===e}))||!!(e&&Array.isArray(e.outputs)&&e.outputs.some((function(e){return t._disabledOutputs.has(e)})))}},{key:"sumAllConnections",value:function(){var e=this.bus,t=this.outputs;e.zeros();for(var n=0,r=t.length;n<r;n++)e.sumFrom(t[n].pull());return e}},{key:"pull",value:function(){if(1===this.outputs.length){var e=this.outputs[0];if(e.getNumberOfChannels()===this.getNumberOfChannels())return this.bus.copyFrom(e.pull())}return this.sumAllConnections()}}]),e}(),ce=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var fe=Q,he=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.node,r=t.index,i=t.numberOfChannels,a=t.enabled;this.node=n,this.index=0|r,this.bus=new fe(i,n.blockSize,n.sampleRate),this.inputs=[],this._enabled=!!a}return ce(e,[{key:"getNumberOfChannels",value:function(){return this.bus.getNumberOfChannels()}},{key:"setNumberOfChannels",value:function(e){if(e!==this.getNumberOfChannels()){var t=this.node.getChannelInterpretation();this.bus.setNumberOfChannels(e,t),this.inputs.forEach((function(e){e.updateNumberOfChannels()}))}}},{key:"isEnabled",value:function(){return this._enabled}},{key:"enable",value:function(){var e=this;this._enabled||(this._enabled=!0,this.inputs.forEach((function(t){t.enableFrom(e)})))}},{key:"disable",value:function(){var e=this;this._enabled&&(this._enabled=!1,this.inputs.forEach((function(t){t.disableFrom(e)})))}},{key:"zeros",value:function(){this.bus.zeros()}},{key:"connect",value:function(e,t){var n=e.inputs[0|t];-1===this.inputs.indexOf(n)&&(this.inputs.push(n),n.connectFrom(this))}},{key:"disconnect",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=1===t.length?function(e){return e.node===t[0]}:2===t.length?function(e){return e.node===t[0]&&e.index===t[1]}:function(){return!0},i=this.inputs.length-1;i>=0;i--){var a=this.inputs[i];r(a)&&(a.disconnectFrom(this),this.inputs.splice(i,1))}}},{key:"isConnectedTo",value:function(e){return this.inputs.some((function(t){return t.node===e}))}},{key:"pull",value:function(){return this.node.processIfNecessary(),this.bus}}]),e}(),pe={SET_VALUE_AT_TIME:"setValueAtTime",LINEAR_RAMP_TO_VALUE_AT_TIME:"linearRampToValueAtTime",EXPONENTIAL_RAMP_TO_VALUE_AT_TIME:"exponentialRampToValueAtTime",SET_TARGET_AT_TIME:"setTargetAtTime",SET_VALUE_CURVE_AT_TIME:"setValueCurveAtTime"},me=pe.SET_VALUE_AT_TIME,ye=pe.LINEAR_RAMP_TO_VALUE_AT_TIME,_e=pe.EXPONENTIAL_RAMP_TO_VALUE_AT_TIME,be=pe.SET_TARGET_AT_TIME,de=pe.SET_VALUE_CURVE_AT_TIME;function ve(e,t,n,r,i){return e<=r?t:i<=e?n:t+(e-r)/(i-r)*(n-t)}function ge(e,t,n,r,i){var a;return e<=r?t:i<=e?n:(a=(e-r)/(i-r),t*Math.pow(n/t,a))}function we(e,t,n,r,i){return e<=r?t:n+(t-n)*Math.exp((r-e)/i)}function Oe(e,t,n,r){var i,a,o,u;return o=(a=0|(i=(e-n)/r*(t.length-1)))+1,t.length<=o?t[t.length-1]:(u=t[a])+i%1*(t[o]-u)}var ke={computeValueAtTime:function(e,t,n){for(var r=n,i=0,a=e.length;i<a;i++){var o=e[i],u=e[i+1],s=Math.min(t,u?u.time:t);if(t<o.time)break;switch(o.type){case me:case ye:case _e:r=o.args[0];break;case be:r=we(s,r,o.args[0],o.args[1],o.args[2]);break;case de:r=Oe(s,o.args[0],o.args[1],o.args[2])}if(u)switch(u.type){case ye:r=ve(s,r,u.args[0],o.time,u.args[1]);break;case _e:r=ge(s,r,u.args[0],o.time,u.args[1])}}return r},getLinearRampToValueAtTime:ve,getExponentialRampToValueAtTime:ge,getTargetValueAtTime:we,getValueCurveAtTime:Oe},Ce=m.fill,Pe=pe.SET_VALUE_AT_TIME,Ee=pe.LINEAR_RAMP_TO_VALUE_AT_TIME,Te=pe.EXPONENTIAL_RAMP_TO_VALUE_AT_TIME,Me=pe.SET_TARGET_AT_TIME,Se=pe.SET_VALUE_CURVE_AT_TIME,De={dspInit:function(){this._prevValue=NaN,this._hasSampleAccurateValues=!1,this._currentEventIndex=-1,this._quantumStartFrame=-1,this._remainSamples=0,this._schedParams={}},dspProcess:function(){var e=this.inputs[0],t=e.bus;switch(e.pull(),2*!!this._timeline.length+!t.isSilent){case 0:return this.dspStaticValue();case 1:return this.dspInputAndOffset(t);case 2:return this.dspEvents();case 3:return this.dspEventsAndInput(t)}},dspStaticValue:function(){var e=this._value;e!==this._prevValue&&(0===e?this.outputBus.zeros():Ce(this.outputBus.getMutableData()[0],e),this._prevValue=e),this._hasSampleAccurateValues=!1},dspInputAndOffset:function(e){var t=this.blockSize,n=this.outputBus.getMutableData()[0],r=e.getChannelData()[0],i=this._value;if(n.set(r),0!==i)for(var a=0;a<t;a++)n[a]+=i;this._prevValue=NaN,this._hasSampleAccurateValues=!0},dspEvents:function(){var e=this.outputBus.getMutableData()[0];this.dspValuesForTimeRange(e),this._prevValue=NaN,this._hasSampleAccurateValues=!0},dspEventsAndInput:function(e){var t=this.blockSize,n=this.outputBus.getMutableData()[0],r=e.getChannelData()[0];this.dspValuesForTimeRange(n);for(var i=0;i<t;i++)n[i]+=r[i];this._prevValue=NaN,this._hasSampleAccurateValues=!0},dspValuesForTimeRange:function(e){var t=this.blockSize,n=this.context.currentSampleFrame,r=n+t,i=this.sampleRate,a=this._timeline,o=this._value,u=0;if(-1===this._currentEventIndex){var s=a[0].startFrame;if(r<=s){for(var l=0;l<t;l++)e[l]=o;return void(this._hasSampleAccurateValues=!1)}for(var c=0,f=s-n;c<f;c++)e[u++]=o;this._currentEventIndex=0}this._hasSampleAccurateValues=!0;var h=this._quantumStartFrame===n?this._remainSamples:0,p=this._schedParams;for(h===1/0&&this._currentEventIndex+1!==a.length&&(h=a[this._currentEventIndex+1].startFrame-n);u<t&&this._currentEventIndex<a.length;){var m=a[this._currentEventIndex],y=m.startFrame,_=m.endFrame;if(_<n||y===_)h=0,this._currentEventIndex+=1;else{if(h<=0){var b=Math.max(0,n-y);switch(m.type){case Pe:o=m.startValue,p={type:Pe};break;case Ee:var d=(m.endValue-m.startValue)/(m.endFrame-m.startFrame);d?(o=m.startValue+b*d,p={type:Ee,grow:d}):(o=m.startValue,p={type:Pe});break;case Te:var v=m.endValue/m.startValue,g=m.endFrame-m.startFrame,w=Math.pow(v,1/g);w?(o=m.startValue*Math.pow(w,b),p={type:Te,grow:w}):(o=m.startValue,p={type:Pe});break;case Me:var O=Math.fround(m.args[0]),k=m.args[2],C=1-Math.exp(-1/(i*k)),P=(n+u)/i;o=ke.computeValueAtTime(a,P,this._userValue),p=1!==C?{type:Me,target:O,discreteTimeConstant:C}:{type:Pe};break;case Se:var E=m.args[0];p={type:Se,curve:E,startFrame:y,endFrame:_}}h=_-y-b}var T=Math.min(t-u,h);switch(p.type){case Pe:for(var M=0;M<T;M++)e[u++]=o;break;case Ee:for(var S=0;S<T;S++)e[u++]=o,o+=p.grow;break;case Te:for(var D=0;D<T;D++)e[u++]=o,o*=p.grow;break;case Me:for(var A=0;A<T;A++)e[u++]=o,o+=(p.target-o)*p.discreteTimeConstant;break;case Se:for(var j=p.curve,x=p.endFrame-p.startFrame,I=p.startFrame,R=0;R<T;R++){var F=(n+u-I)/x*(j.length-1),N=0|F,V=N+1;o=j[N]+F%1*(j[V]-j[N]),e[u++]=o}h===T&&(o=j[j.length-1])}0===(h-=T)&&(this._currentEventIndex+=1)}}for(;u<t;)e[u++]=o;this._value=o,this._schedParams=p,this._remainSamples=h,this._quantumStartFrame=r}},Ae={CONTROL_RATE:"control",AUDIO_RATE:"audio"},je=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ie=le,Re=Q,Fe=De,Ne=m.defaults,Ve=m.toNumber,Le=J.EXPLICIT,ze=Ae.CONTROL_RATE,Ue=pe.SET_VALUE_AT_TIME,Be=pe.LINEAR_RAMP_TO_VALUE_AT_TIME,$e=pe.EXPONENTIAL_RAMP_TO_VALUE_AT_TIME,qe=pe.SET_TARGET_AT_TIME,We=pe.SET_VALUE_CURVE_AT_TIME,Xe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xe(this,e);var r=Ne(n.rate,ze),i=Ne(n.defaultValue,0);this.context=t,this.blockSize=t.blockSize,this.sampleRate=t.sampleRate,this.inputs=[new Ie({node:this,index:0,numberOfChannels:1,channelCount:1,channelCountMode:Le})],this.outputBus=new Re(1,this.blockSize,this.sampleRate),this._rate=r,this._defaultValue=Ve(i),this._value=this._defaultValue,this._userValue=this._value,this._timeline=[],this.dspInit(this._rate)}return je(e,[{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e){this._value=this._userValue=Ve(e)}},{key:"getDefaultValue",value:function(){return this._defaultValue}},{key:"setValueAtTime",value:function(e,t){e=Ve(e),t=Math.max(0,Ve(t));var n={type:Ue,time:t,args:[e,t],startFrame:Math.round(t*this.sampleRate),endFrame:1/0,startValue:e,endValue:e},r=this.insertEvent(n),i=this._timeline[r-1],a=this._timeline[r+1];if(i)switch(i.type){case Ue:case qe:i.endFrame=n.startFrame}if(a){switch(a.type){case Be:case $e:a.startFrame=n.startFrame,a.startValue=n.startValue}n.endFrame=a.startFrame}r<=this._currentEventIndex&&(this._currentEventIndex=r,this._remainSamples=0)}},{key:"linearRampToValueAtTime",value:function(e,t){e=Ve(e),t=Math.max(0,Ve(t));var n={type:Be,time:t,args:[e,t],startFrame:0,endFrame:Math.round(t*this.sampleRate),startValue:this._defaultValue,endValue:e},r=this.insertEvent(n),i=this._timeline[r-1],a=this._timeline[r+1];if(i)switch(i.type){case Ue:case qe:n.startFrame=i.startFrame,n.startValue=i.startValue,i.endFrame=n.startFrame;break;case Be:case $e:case We:n.startFrame=i.endFrame,n.startValue=i.endValue}if(a)switch(a.type){case Be:case $e:a.startFrame=n.endFrame,a.startValue=n.endValue}r<=this._currentEventIndex&&(this._currentEventIndex=r,this._remainSamples=0)}},{key:"exponentialRampToValueAtTime",value:function(e,t){e=Math.max(1e-6,Ve(e)),t=Math.max(0,Ve(t));var n={type:$e,time:t,args:[e,t],startFrame:0,endFrame:Math.round(t*this.sampleRate),startValue:Math.max(1e-6,this._defaultValue),endValue:e},r=this.insertEvent(n),i=this._timeline[r-1],a=this._timeline[r+1];if(i)switch(i.type){case Ue:case qe:n.startFrame=i.startFrame,n.startValue=i.startValue,i.endFrame=n.startFrame;break;case Be:case $e:case We:n.startFrame=i.endFrame,n.startValue=i.endValue}if(a)switch(a.type){case Be:case $e:a.startFrame=n.endFrame,a.startValue=n.endValue}r<=this._currentEventIndex&&(this._currentEventIndex=r,this._remainSamples=0)}},{key:"setTargetAtTime",value:function(e,t,n){e=Ve(e),t=Math.max(0,Ve(t)),n=Math.max(0,Ve(n));var r={type:qe,time:t,args:[e,t,n],startFrame:Math.round(t*this.sampleRate),endFrame:1/0,startValue:0,endValue:e},i=this.insertEvent(r),a=this._timeline[i-1],o=this._timeline[i+1];if(a)switch(a.type){case Ue:r.startValue=a.endValue,a.endFrame=r.startFrame;break;case qe:r.startValue=0,a.endFrame=r.startFrame;break;case Be:case $e:case We:r.startValue=a.endValue}if(o){switch(o.type){case Be:case $e:o.startFrame=r.startFrame,o.startValue=r.startValue}r.endFrame=o.startFrame}i<=this._currentEventIndex&&(this._currentEventIndex=i,this._remainSamples=0)}},{key:"setValueCurveAtTime",value:function(e,t,n){if(t=Math.max(0,Ve(t)),n=Math.max(0,Ve(n)),0!==e.length&&0!==n){var r={type:We,time:t,args:[e,t,n],startFrame:Math.round(t*this.sampleRate),endFrame:Math.round((t+n)*this.sampleRate),startValue:e[0],endValue:e[e.length-1]},i=this.insertEvent(r),a=this._timeline[i-1],o=this._timeline[i+1];if(a)switch(a.type){case Ue:case qe:a.endFrame=r.startFrame}if(o)switch(o.type){case Be:case $e:o.startFrame=r.startFrame,o.startValue=r.endValue}i<=this._currentEventIndex&&(this._currentEventIndex=i,this._remainSamples=0)}}},{key:"cancelScheduledValues",value:function(e){e=Math.max(0,Ve(e)),this._timeline=this._timeline.filter((function(t){return t.time<e}));var t=this._timeline.length-1,n=this._timeline[t];if(n)switch(n.type){case Ue:case qe:n.endFrame=1/0}t<=this._currentEventIndex&&(this._currentEventIndex=t,this._remainSamples=0)}},{key:"getRate",value:function(){return this._rate}},{key:"hasSampleAccurateValues",value:function(){return this._hasSampleAccurateValues}},{key:"getSampleAccurateValues",value:function(){return this.outputBus.getChannelData()[0]}},{key:"enableOutputsIfNecessary",value:function(){}},{key:"disableOutputsIfNecessary",value:function(){}},{key:"getTimeline",value:function(){return this._timeline}},{key:"getEvents",value:function(){return this._timeline.map((function(e){return{type:e.type,time:e.time,args:e.args}}))}},{key:"insertEvent",value:function(e){var t=e.time,n=this._timeline;if(0===n.length||n[n.length-1].time<t)return n.push(e),n.length-1;for(var r=0,i=0;r<n.length;){if(n[r].time===t&&n[r].type===e.type){i=1;break}if(t<n[r].time)break;r+=1}return n.splice(r,i,e),r}}]),e}();Object.assign(Xe.prototype,Fe);var Ge=Xe,Ye=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ke=f,Qe=le,Je=he,et=Ge,tt=m,nt=tt.defaults,rt=tt.clamp,it=m.toNumber,at=D.MIN_NUMBER_OF_CHANNELS,ot=D.MAX_NUMBER_OF_CHANNELS,ut=J.MAX,st=J.CLAMPED_MAX,lt=J.EXPLICIT,ct=W.DISCRETE,ft=W.SPEAKERS,ht=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};He(this,t);var i=nt(r.inputs,[]),a=nt(r.outputs,[]),o=nt(r.channelCount,1),u=nt(r.channelCountMode,ut),s=ft,l=nt(r.allowedMinChannelCount,at),c=nt(r.allowedMaxChannelCount,ot),f=nt(r.allowedChannelCountMode,[ut,st,lt]),h=nt(r.allowedChannelInterpretation,[ct,ft]),p=Ze(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return p.context=e,p.blockSize=e.blockSize,p.sampleRate=e.sampleRate,p.inputs=[],p.outputs=[],p.channelCount=o,p.channelCountMode=u,p.channelInterpretation=s,p.allowedMinChannelCount=l,p.allowedMaxChannelCount=c,p.allowedChannelCountMode=f,p.allowedChannelInterpretation=h,p.currentSampleFrame=-1,p._params=[],p._enabled=!1,p._suicideAtSampleFrame=1/0,i.forEach((function(e){p.addInput(e,o,u)})),a.forEach((function(e){p.addOutput(e)})),"number"==typeof n.channelCount&&p.setChannelCount(n.channelCount),"string"==typeof n.channelCountMode&&p.setChannelCountMode(n.channelCountMode),"string"==typeof n.channelInterpretation&&p.setChannelInterpretation(n.channelInterpretation),p}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ke),Ye(t,[{key:"getNumberOfInputs",value:function(){return this.inputs.length}},{key:"getNumberOfOutputs",value:function(){return this.outputs.length}},{key:"getChannelCount",value:function(){return this.channelCount}},{key:"setChannelCount",value:function(e){e=it(e);var t=rt(e,this.allowedMinChannelCount,this.allowedMaxChannelCount);t!==this.channelCount&&(this.channelCount=t,this.inputs.forEach((function(t){t.setChannelCount(e)})))}},{key:"getChannelCountMode",value:function(){return this.channelCountMode}},{key:"setChannelCountMode",value:function(e){-1!==this.allowedChannelCountMode.indexOf(e)&&e!==this.channelCountMode&&(this.channelCountMode=e,this.inputs.forEach((function(t){t.setChannelCountMode(e)})))}},{key:"getChannelInterpretation",value:function(){return this.channelInterpretation}},{key:"setChannelInterpretation",value:function(e){-1!==this.allowedChannelInterpretation.indexOf(e)&&e!==this.channelInterpretation&&(this.channelInterpretation=e,this.inputs.forEach((function(t){t.setChannelInterpretation(e)})))}},{key:"connect",value:function(e,t,n){this.outputs[0|t].connect(e,0|n)}},{key:"disconnect",value:function(){return 0===arguments.length?this.disconnectAll():"number"==typeof(arguments.length<=0?void 0:arguments[0])?this.disconnectAllFromOutput(0|(arguments.length<=0?void 0:arguments[0])):1===arguments.length?this.disconnectIfConnected(arguments.length<=0?void 0:arguments[0]):this.disconnectFromOutputIfConnected(0|(arguments.length<=1?void 0:arguments[1]),arguments.length<=0?void 0:arguments[0],0|(arguments.length<=2?void 0:arguments[2]))}},{key:"addInput",value:function(e,t,n){var r=this.inputs.length,i=new Qe({node:this,index:r,numberOfChannels:e,channelCount:t,channelCountMode:n});return this.inputs.push(i),i}},{key:"addOutput",value:function(e){var t=this.outputs.length,n=new Je({node:this,index:t,numberOfChannels:e});return this.outputs.push(n),n}},{key:"addParam",value:function(e,t){var n=new et(this.context,{rate:e,defaultValue:t});return this._params.push(n),n}},{key:"isEnabled",value:function(){return this._enabled}},{key:"getTailTime",value:function(){return 0}},{key:"enableOutputsIfNecessary",value:function(){this._enabled||(this._suicideAtSampleFrame=1/0,this._enabled=!0,this.outputs.forEach((function(e){e.enable()})))}},{key:"disableOutputsIfNecessary",value:function(){var e=this.context.currentTime,t=e+this.getTailTime();t===e?this._disableOutputsIfNecessary():t!==1/0&&(this._suicideAtSampleFrame=Math.round(t*this.sampleRate))}},{key:"_disableOutputsIfNecessary",value:function(){this._enabled&&(this._enabled=!1,this.outputs.forEach((function(e){e.disable()})))}},{key:"channelDidUpdate",value:function(){}},{key:"disconnectAll",value:function(){this.outputs.forEach((function(e){e.disconnect()}))}},{key:"disconnectAllFromOutput",value:function(e){this.outputs[0|e].disconnect()}},{key:"disconnectIfConnected",value:function(e){this.outputs.forEach((function(t){t.disconnect(e)}))}},{key:"disconnectFromOutputIfConnected",value:function(e,t,n){this.outputs[0|e].disconnect(t,0|n)}},{key:"processIfNecessary",value:function(){var e=this;if(!(this.context.currentSampleFrame<=this.currentSampleFrame))if(this.currentSampleFrame=this.context.currentSampleFrame,this._suicideAtSampleFrame<=this.currentSampleFrame){for(var t=this.outputs,n=0,r=t.length;n<r;n++)t[n].zeros();this.context.addPostProcess((function(){e._disableOutputsIfNecessary()}))}else{for(var i=this.inputs,a=0,o=i.length;a<o;a++)i[a].pull();for(var u=this._params,s=0,l=u.length;s<l;s++)u[s].dspProcess();this.dspProcess()}}},{key:"dspInit",value:function(){}},{key:"dspProcess",value:function(){}}]),t}();var pt=function(e,t){if(!e)throw Error("Input waveform is not provided, pass input array.");var n=e.length,r=Math.floor(Math.log(n)/Math.LN2);if(Math.pow(2,r)!==n)throw Error("Invalid array size, must be a power of 2.");t||(t=new Array(n/2));var i,a,o,u,s,l,c,f,h,p,m,y,_,b,d,v,g,w,O,k,C,P,E,T,M,S,D=n,A=new Array(n),j=2*Math.PI,x=Math.sqrt,I=D>>>1,R=2/D;!function(e,t,n){var r,i=e>>>1,a=e-1,o=1,u=0;t[0]=n[0];do{for(u+=i,t[o]=n[u],t[u]=n[o],o++,r=i<<1;!((u^=r>>=1)&r););u>=o&&(t[o]=n[u],t[u]=n[o],t[a-o]=n[a-u],t[a-u]=n[a-o]),o++}while(o<i);t[a]=n[a]}(n,A,e);for(var F=0,N=4;F<D;N*=4){for(var V=F;V<D;V+=N)g=A[V]-A[V+1],A[V]+=A[V+1],A[V+1]=g;F=2*(N-1)}for(i=2,u=D>>>1;u>>>=1;){F=0,N=(i<<=1)<<1,a=i>>>2,o=i>>>3;do{if(1!==a)for(V=F;V<D;V+=N)y=(m=(p=(h=V)+a)+a)+a,s=A[m]+A[y],A[y]-=A[m],A[m]=A[h]-s,A[h]+=s,h+=o,p+=o,y+=o,s=A[m+=o]+A[y],l=A[m]-A[y],s=-s*Math.SQRT1_2,l*=Math.SQRT1_2,g=A[p],A[y]=s+g,A[m]=s-g,A[p]=A[h]-l,A[h]+=l;else for(V=F;V<D;V+=N)y=(m=(p=(h=V)+a)+a)+a,s=A[m]+A[y],A[y]-=A[m],A[m]=A[h]-s,A[h]+=s;F=(N<<1)-i,N<<=2}while(F<D);P=j/i;for(var L=1;L<o;L++){E=L*P,O=Math.sin(E),k=4*(w=Math.cos(E))*(w*w-.75),C=4*O*(.75-O*O),F=0,N=i<<1;do{for(V=F;V<D;V+=N)y=(m=(p=(h=V+L)+a)+a)+a,v=(d=(b=(_=V+a-L)+a)+a)+a,l=A[d]*w-A[m]*O,s=A[d]*O+A[m]*w,f=A[v]*k-A[y]*C,c=A[v]*C+A[y]*k,g=l-f,l+=f,f=g,A[v]=l+A[b],A[m]=l-A[b],g=c-s,s+=c,c=g,A[y]=c+A[p],A[d]=c-A[p],A[b]=A[h]-s,A[h]+=s,A[p]=f+A[_],A[_]-=f;F=(N<<1)-i,N<<=2}while(F<D)}}for(;--I;)S=R*x((T=A[I])*T+(M=A[D-I-1])*M),t[I]=S;return t[0]=Math.abs(R*A[0]),t},mt=function(e,t){var n=6.283185307179586*e/(t-1);return.42-.5*Math.cos(n)+.08*Math.cos(2*n)},yt=Q,_t=m,bt=_t.toDecibel,dt=_t.normalize,vt={dspInit:function(e){this._timeDomainBuffer=[],this._analyserBus=new yt(1,32768,e),this._analyserBusOffset=0,this._audioData=this._analyserBus.audioData.channelData[0]},dspUpdateSizes:function(e){for(var t=new Float32Array(e/2),n=new Float32Array(e),r=0;r<e;r++)n[r]=mt(r,e);this._previousSmooth=t,this._blackmanTable=n},dspGetFloatFrequencyData:function(e){var t=this._fftSize,n=this._blackmanTable,r=this._previousSmooth,i=new Float32Array(t),a=Math.min(e.length,t/2),o=this._smoothingTimeConstant;this.dspGetFloatTimeDomainData(i);for(var u=0;u<t;u++)i[u]=i[u]*n[u]||0;for(var s=pt(i),l=0;l<a;l++){var c=s[l];r[l]=o*r[l]+(1-o)*c;var f=bt(r[l]);e[l]=Number.isFinite(f)?f:0}},dspGetByteFrequencyData:function(e){var t=Math.min(e.length,this._fftSize/2),n=this._minDecibels,r=this._maxDecibels,i=new Float32Array(t);this.dspGetFloatFrequencyData(i);for(var a=0;a<t;a++)e[a]=Math.round(255*dt(i[a],n,r))},dspGetByteTimeDomainData:function(e){var t=Math.min(e.length,this._fftSize),n=new Float32Array(t);this.dspGetFloatTimeDomainData(n);for(var r=0;r<t;r++)e[r]=Math.round(255*dt(n[r],-1,1))},dspGetFloatTimeDomainData:function(e){var t=this._audioData,n=this._fftSize,r=(this._analyserBusOffset-n+32768)%32768,i=Math.min(r+n,32768),a=i-r;if(e.set(t.subarray(r,i)),a!==n){var o=n-a,u=t.subarray(0,o);e.set(u,a)}},dspProcess:function(){var e=this.inputs[0].bus,t=this.outputs[0].bus,n=this._analyserBus,r=e.audioData.length;t.copyFrom(e),n.copyFromWithOffset(e,this._analyserBusOffset),this._analyserBusOffset+=r,32768<=this._analyserBusOffset&&(this._analyserBusOffset=0)}},gt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var kt=ht,Ct=vt,Pt=m,Et=Pt.defaults,Tt=Pt.clamp,Mt=m,St=Mt.toNumber,Dt=Mt.toPowerOfTwo,At=J.MAX,jt=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wt(this,t);var r=Et(n.fftSize,2048),i=Et(n.minDecibels,-100),a=Et(n.maxDecibels,-30),o=Et(n.smoothingTimeConstant,.8),u=Ot(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:[1],channelCount:1,channelCountMode:At}));return u._fftSize=r,u._minDecibels=i,u._maxDecibels=a,u._smoothingTimeConstant=o,u.dspInit(e.sampleRate),u.setFftSize(r),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,kt),gt(t,[{key:"getFftSize",value:function(){return this._fftSize}},{key:"setFftSize",value:function(e){e=Tt(0|e,32,32768),e=Dt(e,Math.ceil),this._fftSize=e,this.dspUpdateSizes(this._fftSize)}},{key:"getFrequencyBinCount",value:function(){return this._fftSize/2}},{key:"getMinDecibels",value:function(){return this._minDecibels}},{key:"setMinDecibels",value:function(e){-1/0<(e=St(e))&&e<this._maxDecibels&&(this._minDecibels=e)}},{key:"getMaxDecibels",value:function(){return this._maxDecibels}},{key:"setMaxDecibels",value:function(e){e=St(e),this._minDecibels<e&&e<1/0&&(this._maxDecibels=e)}},{key:"getSmoothingTimeConstant",value:function(){return this._smoothingTimeConstant}},{key:"setSmoothingTimeConstant",value:function(e){e=Tt(St(e),0,1),this._smoothingTimeConstant=e}},{key:"getFloatFrequencyData",value:function(e){this.dspGetFloatFrequencyData(e)}},{key:"getByteFrequencyData",value:function(e){this.dspGetByteFrequencyData(e)}},{key:"getFloatTimeDomainData",value:function(e){this.dspGetFloatTimeDomainData(e)}},{key:"getByteTimeDomainData",value:function(e){this.dspGetByteTimeDomainData(e)}},{key:"channelDidUpdate",value:function(e){this.outputs[0].setNumberOfChannels(e)}}]),t}();Object.assign(jt.prototype,Ct);var xt=jt,It=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ft=p,Nt=m,Vt=Nt.toValidNumberOfChannels,Lt=Nt.toNumber,zt=Nt.toValidSampleRate,Ut=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Rt(this,e);var n=t.numberOfChannels,r=t.length,i=t.sampleRate;n=Vt(n),r=Math.max(0,Lt(r)),i=zt(i),this.audioData=new Ft(n,r,i)}return It(e,[{key:"getSampleRate",value:function(){return this.audioData.sampleRate}},{key:"getLength",value:function(){return this.audioData.length}},{key:"getDuration",value:function(){return this.audioData.length/this.audioData.sampleRate}},{key:"getNumberOfChannels",value:function(){return this.audioData.numberOfChannels}},{key:"getChannelData",value:function(e){return this.audioData.channelData[0|e]}},{key:"copyFromChannel",value:function(e,t,n){var r=this.audioData.channelData[0|t];n|=0,e.set(r.subarray(n,n+e.length))}},{key:"copyToChannel",value:function(e,t,n){n|=0,this.audioData.channelData[0|t].set(e,n)}}]),e}(),Bt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var $t=ht,qt=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[],outputs:[1]}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,$t),Bt(t,[{key:"enableOutputsIfNecessary",value:function(){}},{key:"disableOutputsIfNecessary",value:function(){}}]),t}(),Wt={UNSCHEDULED:"unscheduled",SCHEDULED:"scheduled",PLAYING:"playing",FINISHED:"finished"},Xt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Gt=qt,Yt=m.toNumber,Ht=Wt.UNSCHEDULED,Zt=Wt.SCHEDULED,Kt=Wt.PLAYING,Qt=Wt.FINISHED,Jt=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._startTime=1/0,r._stopTime=1/0,r._startFrame=1/0,r._stopFrame=1/0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Gt),Xt(t,[{key:"getStartTime",value:function(){if(this._startTime!==1/0)return this._startTime}},{key:"getStopTime",value:function(){if(this._stopTime!==1/0)return this._stopTime}},{key:"getPlaybackState",value:function(){return this._startTime===1/0?Ht:this.context.currentTime<this._startTime?Zt:this._stopTime<=this.context.currentTime?Qt:Kt}},{key:"start",value:function(e){var t=this;this._startTime===1/0&&(e=Math.max(this.context.currentTime,Yt(e)),this._startTime=e,this._startFrame=Math.round(e*this.sampleRate),this.context.sched(e,(function(){t.outputs[0].enable()})))}},{key:"stop",value:function(e){this._stopTime===1/0&&(e=Math.max(this.context.currentTime,this._startTime,Yt(e)),this._stopTime=e,this._stopFrame=Math.round(e*this.sampleRate))}}]),t}(),en={dspInit:function(){this._phase=0},dspStart:function(){if(this._audioData){var e=this._audioData.sampleRate,t=this._audioData.length/e;this._phase=Math.max(0,Math.min(this._offset,t))*e}},dspProcess:function(){if(null===this._audioData)return this.dspEmitEnded();var e=this.blockSize,t=this.context.currentSampleFrame,n=t+e,r=Math.max(0,this._startFrame-t),i=Math.min(n,this._stopFrame)-t,a=this.outputs[0].bus.getMutableData(),o=0;if(o=this.dspBufferRendering(a,r,i,this.sampleRate),this._stopFrame<=t+o){for(var u=a.length;o<e;){for(var s=0;s<u;s++)a[s][o]=0;o+=1}this.dspEmitEnded()}},dspBufferRendering:function(e,t,n,r){for(var i=this._playbackRate.getSampleAccurateValues(),a=this._detune.getSampleAccurateValues(),o=this._audioData.numberOfChannels,u=this._audioData.length,s=this._audioData.sampleRate,l=this._audioData.channelData,c=s/r,f=this._phase;t<n;){for(var h=i[t],p=a[t],m=h*Math.pow(2,p/1200),y=0;y<o;y++){var _=l[y][0|f]||0,b=l[y][1+(0|f)]||0;e[y][t]=_+f%1*(b-_)}if(t+=1,f+=c*Math.max(0,m),this._loop)if(0<=this._loopStart&&this._loopStart<this._loopEnd)this._loopEnd*s<=f&&(f=this._loopStart*s);else u<=f&&(f=0);else if(u<=f){this.dspEmitEnded();break}}return this._phase=f,t},dspEmitEnded:function(){var e=this;this._done=!0,this.context.addPostProcess((function(){e.outputs[0].bus.zeros(),e.outputs[0].disable(),e.dispatchEvent({type:"ended"})}))}},tn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),nn=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};function rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function an(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var on=Jt,un=Ut,sn=en,ln=m.defaults,cn=m,fn=cn.toImpl,hn=cn.toNumber,pn=Ae.CONTROL_RATE,mn=Wt.FINISHED,yn=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rn(this,t);var r=ln(n.playbackRate,1),i=ln(n.detune,0),a=ln(n.loop,false),o=ln(n.loopStart,0),u=ln(n.loopEnd,0),s=an(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s._buffer=null,s._audioData=null,s._playbackRate=s.addParam(pn,r),s._detune=s.addParam(pn,i),s._loop=!!a,s._loopStart=o,s._loopEnd=u,s._offset=0,s._duration=1/0,s._done=!1,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,on),tn(t,[{key:"getBuffer",value:function(){return this._buffer}},{key:"setBuffer",value:function(e){(e=fn(e))instanceof un&&(this._buffer=e,this._audioData=this._buffer.audioData,this.outputs[0].setNumberOfChannels(this._audioData.numberOfChannels))}},{key:"getStartOffset",value:function(){return this._offset}},{key:"getStartDuration",value:function(){if(this._duration!==1/0)return this._duration}},{key:"getPlaybackState",value:function(){return this._done?mn:nn(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getPlaybackState",this).call(this)}},{key:"getPlaybackRate",value:function(){return this._playbackRate}},{key:"getDetune",value:function(){return this._detune}},{key:"getLoop",value:function(){return this._loop}},{key:"setLoop",value:function(e){this._loop=!!e}},{key:"getLoopStart",value:function(){return this._loopStart}},{key:"setLoopStart",value:function(e){e=Math.max(0,hn(e)),this._loopStart=e}},{key:"getLoopEnd",value:function(){return this._loopEnd}},{key:"setLoopEnd",value:function(e){e=Math.max(0,hn(e)),this._loopEnd=e}},{key:"start",value:function(e,t,n){var r=this;this._startTime===1/0&&(t=ln(t,0),n=ln(n,1/0),e=Math.max(this.context.currentTime,hn(e)),t=Math.max(0,t),n=Math.max(0,hn(n)),this._startTime=e,this._startFrame=Math.round(e*this.sampleRate),this._offset=t,n!==1/0&&(this._duration=n,this._stopFrame=Math.round((this._startTime+n)*this.sampleRate)),this.context.sched(e,(function(){r.dspStart(),r.outputs[0].enable()})))}}]),t}();Object.assign(yn.prototype,sn);var _n=yn,bn={sampleRate:44100,numberOfChannels:2,blockSize:128,bitDepth:16},dn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function vn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var wn=ht,On=m.toValidNumberOfChannels,kn=J.EXPLICIT,Cn=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vn(this,t);var r=n.numberOfChannels;r=On(r);var i=gn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[r],outputs:[],channelCount:r,channelCountMode:kn,allowedMaxChannelCount:r}));return i._numberOfChannels=0|r,i._destinationChannelData=i.inputs[0].bus.getChannelData(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,wn),dn(t,[{key:"getMaxChannelCount",value:function(){return this._numberOfChannels}},{key:"process",value:function(e,t){for(var n=this.inputs,r=this._destinationChannelData,i=e.length,a=0,o=n.length;a<o;a++)n[a].pull();for(var u=0;u<i;u++)e[u].set(r[u],t)}}]),t}(),Pn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var En=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t}return Pn(e,[{key:"setPosition",value:function(){throw new TypeError("NOT YET IMPLEMENTED")}},{key:"setOrientation",value:function(){throw new TypeError("NOT YET IMPLEMENTED")}}]),e}(),Tn={RUNNING:"running",SUSPENDED:"suspended",CLOSED:"closed"},Mn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var An,jn=bn,xn=f,In=Cn,Rn=En,Fn=m,Nn=Fn.defaults,Vn=Fn.fillRange,Ln=m,zn=Ln.toValidSampleRate,Un=Ln.toValidBlockSize,Bn=Ln.toValidNumberOfChannels,$n=Tn.RUNNING,qn=Tn.SUSPENDED,Wn=Tn.CLOSED,Xn=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Sn(this,t);var n=Dn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=Nn(e.sampleRate,jn.sampleRate),i=Nn(e.blockSize,jn.blockSize),a=Nn(e.channels||e.numberOfChannels,jn.numberOfChannels);return r=zn(r),i=Un(i),a=Bn(a),n.sampleRate=0|r,n.blockSize=0|i,n.numberOfChannels=0|a,n.currentTime=0,n.currentSampleFrame=0,n.state=qn,n._destination=new In(n,{numberOfChannels:a}),n._listener=new Rn(n),n._sched={},n._callbacksForPostProcess=null,n._currentFrameIndex=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,xn),Mn(t,[{key:"getDestination",value:function(){return this._destination}},{key:"getSampleRate",value:function(){return this.sampleRate}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getListener",value:function(){return this._listener}},{key:"getState",value:function(){return this.state}},{key:"suspend",value:function(){return this.state===$n?this.changeState(qn):this.notChangeState()}},{key:"resume",value:function(){return this.state===qn?this.changeState($n):this.notChangeState()}},{key:"close",value:function(){return this.state!==Wn?this.changeState(Wn):this.notChangeState()}},{key:"changeState",value:function(e){var t=this;return this.state=e,new Promise((function(e){t.dispatchEvent({type:"statechange"}),e()}))}},{key:"notChangeState",value:function(){return Promise.resolve()}},{key:"sched",value:function(e,t){var n=Math.floor(e*this.sampleRate/this.blockSize)*this.blockSize|0;this._sched[n]?this._sched[n].push(t):this._sched[n]=[t]}},{key:"addPostProcess",value:function(e){null===this._callbacksForPostProcess?this._callbacksForPostProcess=[e]:this._callbacksForPostProcess.push(e)}},{key:"process",value:function(e,t){var n=this._destination;if(this.state!==$n)for(var r=e.length,i=t+this.blockSize,a=0;a<r;a++)Vn(e[a],t,i);else{var o=this._sched,u=0|this.currentSampleFrame;if(o[u]){for(var s=o[u],l=0,c=s.length;l<c;l++)s[l]();delete o[u]}if(n.process(e,t),null!==this._callbacksForPostProcess){for(var f=this._callbacksForPostProcess,h=0,p=f.length;h<p;h++)f[h]();this._callbacksForPostProcess=null}this.currentSampleFrame+=this.blockSize,this.currentTime=this.currentSampleFrame/this.sampleRate}}},{key:"reset",value:function(){this.currentTime=0,this.currentSampleFrame=0,this.state=qn,this._destination=new In(this,{numberOfChannels:this.numberOfChannels}),this._listener=new Rn(this),this._sched=[],this._callbacksForPostProcess=null}}]),t}(),Gn={exports:{}},Yn=function(e,t){e=Math.max(1e-6,Math.min(e,1)),t=Math.max(1e-4,Math.min(t,1e3));var n=2*Math.PI*e,r=Math.sin(n),i=Math.cos(n),a=r/(2*Math.pow(10,t/20)),o=1+a;return[.5*(1-i)/o,(1-i)/o,.5*(1-i)/o,-2*i/o,(1-a)/o]},Hn=function(e,t){e=Math.max(1e-6,Math.min(e,1)),t=Math.max(1e-4,Math.min(t,1e3));var n=2*Math.PI*e,r=Math.sin(n),i=Math.cos(n),a=r/(2*Math.pow(10,t/20)),o=1+a;return[.5*(1+i)/o,-(1+i)/o,.5*(1+i)/o,-2*i/o,(1-a)/o]},Zn=function(e,t){e=Math.max(1e-6,Math.min(e,1)),t=Math.max(1e-4,Math.min(t,1e3));var n=2*Math.PI*e,r=Math.sin(n)/(2*t),i=1+r;return[r/i,0/i,-r/i,-2*Math.cos(n)/i,(1-r)/i]},Kn=function(e,t){e=Math.max(1e-6,Math.min(e,1)),t=Math.max(1e-4,Math.min(t,1e3));var n=2*Math.PI*e,r=Math.sin(n),i=Math.cos(n),a=r/(2*t),o=1+a;return[1/o,-2*i/o,1/o,-2*i/o,(1-a)/o]},Qn=function(e,t){e=Math.max(1e-6,Math.min(e,1)),t=Math.max(1e-4,Math.min(t,1e3));var n=2*Math.PI*e,r=Math.sin(n),i=Math.cos(n),a=r/(2*t),o=1+a;return[(1-a)/o,-2*i/o,(1+a)/o,-2*i/o,(1-a)/o]},Jn=function(e,t,n){e=Math.max(1e-6,Math.min(e,1)),t=Math.max(1e-4,Math.min(t,1e3)),n=Math.max(-40,Math.min(n,40));var r=2*Math.PI*e,i=Math.sin(r),a=Math.cos(r),o=Math.pow(10,n/40),u=i/(2*t),s=1+u/o;return[(1+u*o)/s,-2*a/s,(1-u*o)/s,-2*a/s,(1-u/o)/s]},er=function(e,t,n){e=Math.max(1e-6,Math.min(e,1)),n=Math.max(-40,Math.min(n,40));var r=2*Math.PI*e,i=Math.sin(r),a=Math.cos(r),o=Math.pow(10,n/40),u=i/2*Math.sqrt(2),s=2*Math.sqrt(o)*u,l=o+1+(o-1)*a+s;return[o*(o+1-(o-1)*a+s)/l,2*o*(o-1-(o+1)*a)/l,o*(o+1-(o-1)*a-s)/l,-2*(o-1+(o+1)*a)/l,(o+1+(o-1)*a-s)/l]},tr=function(e,t,n){e=Math.max(1e-6,Math.min(e,1)),n=Math.max(-40,Math.min(n,40));var r=2*Math.PI*e,i=Math.sin(r),a=Math.cos(r),o=Math.pow(10,n/40),u=i/2*Math.sqrt(2),s=2*Math.sqrt(o)*u,l=o+1-(o-1)*a+s;return[o*(o+1+(o-1)*a+s)/l,-2*o*(o-1+(o+1)*a)/l,o*(o+1+(o-1)*a-s)/l,2*(o-1-(o+1)*a)/l,(o+1-(o-1)*a-s)/l]};(An=Gn).exports.lowpass=Yn,An.exports.highpass=Hn,An.exports.bandpass=Zn,An.exports.notch=Kn,An.exports.allpass=Qn,An.exports.peaking=Jn,An.exports.lowshelf=er,An.exports.highshelf=tr;var nr=Gn.exports,rr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ir=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.coefficients=[0,0,0,0,0],this._x1=0,this._x2=0,this._y1=0,this._y2=0}return rr(e,[{key:"process",value:function(e,t,n){for(var r=this.coefficients[0],i=this.coefficients[1],a=this.coefficients[2],o=this.coefficients[3],u=this.coefficients[4],s=void 0,l=this._x1,c=this._x2,f=void 0,h=this._y1,p=this._y2,m=0;m<n;m++)f=r*(s=e[m])+i*l+a*c-o*h-u*p,c=l,l=s,p=h,h=f,t[m]=f;this._x1=ar(l),this._x2=ar(c),this._y1=ar(h),this._y2=ar(p)}},{key:"processWithCoefficients",value:function(e,t,n,r){for(var i=this.coefficients[0],a=this.coefficients[1],o=this.coefficients[2],u=this.coefficients[3],s=this.coefficients[4],l=void 0,c=this._x1,f=this._x2,h=void 0,p=this._y1,m=this._y2,y=1/n,_=(r[0]-i)*y,b=(r[1]-a)*y,d=(r[2]-o)*y,v=(r[3]-u)*y,g=(r[4]-s)*y,w=0;w<n;w++)h=i*(l=e[w])+a*c+o*f-u*p-s*m,f=c,c=l,m=p,p=h,i+=_,a+=b,o+=d,u+=v,s+=g,t[w]=h;this._x1=ar(c),this._x2=ar(f),this._y1=ar(p),this._y2=ar(m),this.coefficients=r}}]),e}();function ar(e){return Math.abs(e)<1175494e-44?0:e}function or(e,t,n){for(var r=0,i=0,a=e.length;i<a;i++)r+=e[i]*t(n*i);return r}var ur={getFilterResponse:function(e,t,n,r,i,a){for(var o=0,u=n.length;o<u;o++){var s=2*Math.PI*(n[o]/a),l=or(t,Math.cos,s),c=or(t,Math.sin,s),f=or(e,Math.cos,s),h=or(e,Math.sin,s);r[o]=Math.sqrt((f*f+h*h)/(l*l+c*c)),i[o]=Math.atan2(c,l)-Math.atan2(h,f)}}},sr=nr,lr=ir,cr=ur.getFilterResponse,fr={dspInit:function(){this._kernels=[],this._quantumStartFrame=-1,this._coefficients=[0,0,0,0,0],this._prevFrequency=0,this._prevDetune=0,this._prevQ=0,this._prevGain=0},dspUpdateKernel:function(e){if(e<this._kernels.length)this._kernels.splice(e);else if(this._kernels.length<e)for(;e!==this._kernels.length;)this._kernels.push(new lr(this,this._kernels.length));switch(e){case 1:this.dspProcess=this.dspProcess1;break;case 2:this.dspProcess=this.dspProcess2;break;default:this.dspProcess=this.dspProcessN}},dspProcess1:function(){var e=this.blockSize,t=this.context.currentSampleFrame,n=t+e,r=this.inputs[0].bus.getChannelData(),i=this.outputs[0].bus.getMutableData(),a=this.dspUpdateCoefficients(),o=this._coefficients,u=this._kernels;t!==this._quantumStartFrame?(u[0].coefficients=o,u[0].process(r[0],i[0],e)):a?u[0].processWithCoefficients(r[0],i[0],e,o):u[0].process(r[0],i[0],e),this._quantumStartFrame=n},dspProcess2:function(){var e=this.blockSize,t=this.context.currentSampleFrame,n=t+e,r=this.inputs[0].bus.getChannelData(),i=this.outputs[0].bus.getMutableData(),a=this.dspUpdateCoefficients(),o=this._coefficients,u=this._kernels;t!==this._quantumStartFrame?(u[0].coefficients=o,u[1].coefficients=o,u[0].process(r[0],i[0],e),u[1].process(r[1],i[1],e)):a?(u[0].processWithCoefficients(r[0],i[0],e,o),u[1].processWithCoefficients(r[1],i[1],e,o)):(u[0].process(r[0],i[0],e),u[1].process(r[1],i[1],e)),this._quantumStartFrame=n},dspProcessN:function(){var e=this.blockSize,t=this.context.currentSampleFrame,n=t+e,r=this.inputs[0].bus.getChannelData(),i=this.outputs[0].bus.getMutableData(),a=this.dspUpdateCoefficients(),o=this._coefficients,u=this._kernels;if(t!==this._quantumStartFrame)for(var s=0,l=u.length;s<l;s++)u[s].coefficients=o,u[s].process(r[s],i[s],e);else if(a)for(var c=0,f=u.length;c<f;c++)u[c].processWithCoefficients(r[c],i[c],e,o);else for(var h=0,p=u.length;h<p;h++)u[h].process(r[h],i[h],e);this._quantumStartFrame=n},dspUpdateCoefficients:function(){var e=this._frequency.getSampleAccurateValues()[0],t=this._detune.getSampleAccurateValues()[0],n=this._Q.getSampleAccurateValues()[0],r=this._gain.getSampleAccurateValues()[0];if(e===this._prevFrequency&&t===this._prevDetune&&n===this._prevQ&&r===this._prevGain)return!1;var i=e/this.sampleRate*Math.pow(2,t/1200);return this._coefficients=sr[this._type](i,n,r),this._prevFrequency=e,this._prevDetune=t,this._prevQ=n,this._prevGain=r,!0},dspGetFrequencyResponse:function(e,t,n){var r=this._frequency.getValue(),i=this._detune.getValue(),a=this._Q.getValue(),o=this._gain.getValue(),u=r/this.sampleRate*Math.pow(2,i/1200),s=sr[this._type](u,a,o),l=[s[0],s[1],s[2]],c=[1,s[3],s[4]];cr(l,c,e,t,n,this.sampleRate)}},hr={LOWPASS:"lowpass",HIGHPASS:"highpass",BANDPASS:"bandpass",LOWSHELF:"lowshelf",HIGHSHELF:"highshelf",PEAKING:"peaking",NOTCH:"notch",ALLPASS:"allpass"},pr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _r=ht,br=fr,dr=m.defaults,vr=J.MAX,gr=Ae.CONTROL_RATE,wr=hr.LOWPASS,Or=[wr,hr.HIGHPASS,hr.BANDPASS,hr.LOWSHELF,hr.HIGHSHELF,hr.PEAKING,hr.NOTCH,hr.ALLPASS],kr=wr,Cr=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mr(this,t);var r=dr(n.type,kr),i=dr(n.frequency,350),a=dr(n.detune,0),o=dr(n.Q,1),u=dr(n.gain,0),s=yr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:[1],channelCount:2,channelCountMode:vr}));return s._type=r,s._frequency=s.addParam(gr,i),s._detune=s.addParam(gr,a),s._Q=s.addParam(gr,o),s._gain=s.addParam(gr,u),s.dspInit(),s.dspUpdateKernel(1),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,_r),pr(t,[{key:"getType",value:function(){return this._type}},{key:"setType",value:function(e){-1!==Or.indexOf(e)&&(this._type=e)}},{key:"getFrequency",value:function(){return this._frequency}},{key:"getDetune",value:function(){return this._detune}},{key:"getQ",value:function(){return this._Q}},{key:"getGain",value:function(){return this._gain}},{key:"getFrequencyResponse",value:function(e,t,n){this.dspGetFrequencyResponse(e,t,n)}},{key:"channelDidUpdate",value:function(e){this.dspUpdateKernel(e),this.outputs[0].setNumberOfChannels(e)}},{key:"getTailTime",value:function(){return.2}}]),t}();Object.assign(Cr.prototype,br);var Pr=Cr,Er={dspProcess:function(){var e=this.outputs[0].bus,t=this.inputs.map((function(e){return e.bus})),n=t.every((function(e){return e.isSilent}));if(e.zeros(),!n)for(var r=e.getMutableData(),i=0,a=t.length;i<a;i++)r[i].set(t[i].getChannelData()[0])}},Tr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Mr=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};function Sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ar=ht,jr=Er,xr=m,Ir=xr.defaults,Rr=xr.fill,Fr=m.toValidNumberOfChannels,Nr=J.EXPLICIT,Vr=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Sr(this,t);var r=Ir(n.numberOfInputs,6);return r=Fr(r),Dr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:Rr(new Array(r),1),outputs:[r],channelCount:1,channelCountMode:Nr,allowedMaxChannelCount:1,allowedChannelCountMode:[Nr]}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ar),Tr(t,[{key:"disableOutputsIfNecessary",value:function(){if(this.isEnabled()){for(var e=this.inputs,n=0,r=e.length;n<r;n++)if(e[n].isEnabled())return;Mr(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disableOutputsIfNecessary",this).call(this)}}}]),t}();Object.assign(Vr.prototype,jr);var Lr=Vr;function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ur(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Br=ht,$r={dspProcess:function(){var e=this.inputs[0].bus,t=this.outputs;if(e.isSilent)for(var n=0,r=t.length;n<r;n++)t[n].bus.zeros();else for(var i=e.getChannelData(),a=0,o=t.length;a<o;a++){var u=t[a].bus;i[a]?u.getMutableData()[0].set(i[a]):u.zeros()}}},qr=m,Wr=qr.defaults,Xr=qr.fill,Gr=m.toValidNumberOfChannels,Yr=J.MAX,Hr=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zr(this,t);var r=Wr(n.numberOfOutputs,6);return r=Gr(r),Ur(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:Xr(new Array(r),1),channelCount:2,channelCountMode:Yr}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Br),t}();Object.assign(Hr.prototype,$r);var Zr=Hr,Kr=m.fill,Qr={dspInit:function(){},dspProcess:function(){var e=this._offset,t=this.outputs[0].bus.getMutableData();e.hasSampleAccurateValues()?t[0].set(e.getSampleAccurateValues()):Kr(t[0],e.getValue())}},Jr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ei(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ti(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ni=Jt,ri=Qr,ii=m.defaults,ai=J.MAX,oi=Ae.AUDIO_RATE,ui=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ei(this,t);var r=ii(n.offset,1),i=ti(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:[1],channelCount:2,channelCountMode:ai}));return i._offset=i.addParam(oi,r),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ni),Jr(t,[{key:"getOffset",value:function(){return this._offset}}]),t}();Object.assign(ui.prototype,ri);var si=ui,li={dspProcess:function(){var e=this.outputs[0].bus;e.zeros(),e.sumFrom(this.inputs[0].bus)}},ci=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function fi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hi(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var pi=ht,mi=Ut,yi=li,_i=m.defaults,bi=m.toImpl,di=J.CLAMPED_MAX,vi=J.EXPLICIT,gi=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fi(this,t);var r=_i(n.disableNormalization,false),i=hi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:[1],channelCount:2,channelCountMode:di,allowedMaxChannelCount:2,allowedChannelCountMode:[di,vi]}));return i._buffer=null,i._audioData=null,i._normalize=!r,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,pi),ci(t,[{key:"getBuffer",value:function(){return this._buffer}},{key:"setBuffer",value:function(e){(e=bi(e))instanceof mi&&(this._buffer=e,this._audioData=this._buffer.audioData)}},{key:"getNormalize",value:function(){return this._normalize}},{key:"setNormalize",value:function(e){this._normalize=!!e}},{key:"channelDidUpdate",value:function(e){e=Math.min(e,2),this.outputs[0].setNumberOfChannels(e)}}]),t}();Object.assign(gi.prototype,yi);var wi=gi,Oi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ki={dspInit:function(e){this._kernels=[],this._delayBufferLength=this.dspComputeDelayBufferLength(e),this._delayIndices=new Float32Array(this.blockSize)},dspComputeDelayBufferLength:function(e){return Math.ceil(e*this.sampleRate/this.blockSize)*this.blockSize+this.blockSize},dspUpdateKernel:function(e){if(e<this._kernels.length)this._kernels.splice(e);else if(this._kernels.length<e)for(;e!==this._kernels.length;)this._kernels.push(new Ci(this,this._kernels.length));switch(e){case 1:this.dspProcess=this.dspProcess1;break;case 2:this.dspProcess=this.dspProcess2;break;default:this.dspProcess=this.dspProcessN}},dspProcess1:function(){var e=this.blockSize,t=this.inputs[0].bus.getChannelData(),n=this.outputs[0].bus.getMutableData(),r=this._delayIndices,i=this._kernels[0];this._delayTime.hasSampleAccurateValues()?(i.computeAccurateDelayIndices(r,this._delayTime.getSampleAccurateValues()),i.processWithAccurateDelayIndices(t[0],n[0],r,e)):(i.computeStaticDelayIndices(r,this._delayTime.getValue()),i.processWithStaticDelayIndices(t[0],n[0],r,e))},dspProcess2:function(){var e=this.blockSize,t=this.inputs[0].bus.getChannelData(),n=this.outputs[0].bus.getMutableData(),r=this._delayIndices,i=this._kernels;this._delayTime.hasSampleAccurateValues()?(i[0].computeAccurateDelayIndices(r,this._delayTime.getSampleAccurateValues()),i[0].processWithAccurateDelayIndices(t[0],n[0],r,e),i[1].processWithAccurateDelayIndices(t[1],n[1],r,e)):(i[0].computeStaticDelayIndices(r,this._delayTime.getValue()),i[0].processWithStaticDelayIndices(t[0],n[0],r,e),i[1].processWithStaticDelayIndices(t[1],n[1],r,e))},dspProcessN:function(){var e=this.blockSize,t=this.inputs[0].bus.getChannelData(),n=this.outputs[0].bus.getMutableData(),r=this._delayIndices,i=this._kernels;if(this._delayTime.hasSampleAccurateValues()){i[0].computeAccurateDelayIndices(r,this._delayTime.getSampleAccurateValues());for(var a=0,o=i.length;a<o;a++)i[a].processWithAccurateDelayIndices(t[a],n[a],r,e)}else{i[0].computeStaticDelayIndices(r,this._delayTime.getValue());for(var u=0,s=i.length;u<s;u++)i[u].processWithStaticDelayIndices(t[u],n[u],r,e)}}},Ci=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sampleRate=t.sampleRate,this._maxDelayTime=t._maxDelayTime,this._delayBufferLength=t._delayBufferLength,this._delayBuffer=new Float32Array(this._delayBufferLength),this._virtualDelayIndex=0}return Oi(e,[{key:"computeStaticDelayIndices",value:function(e,t){var n=this._sampleRate,r=this._maxDelayTime,i=this._delayBufferLength,a=this._virtualDelayIndex-(t=Math.max(0,Math.min(t,r)))*n;a<0&&(a+=i);for(var o=0,u=e.length;o<u;o++)e[o]=a++,i<=a&&(a-=i);return e}},{key:"computeAccurateDelayIndices",value:function(e,t){for(var n=this._sampleRate,r=this._maxDelayTime,i=this._delayBufferLength,a=this._virtualDelayIndex,o=0,u=e.length;o<u;o++){var s=a+o-Math.max(0,Math.min(t[o],r))*n;s<0&&(s+=i),e[o]=s}return e}},{key:"processWithStaticDelayIndices",value:function(e,t,n,r){var i=this._delayBufferLength,a=this._delayBuffer;this._delayBuffer.set(e,this._virtualDelayIndex);var o=n[0]%1;if(0===o)for(var u=0;u<r;u++)t[u]=a[n[u]];else for(var s=0;s<r;s++){var l=0|n[s],c=(l+1)%i;t[s]=a[l]+o*(a[c]-a[l])}this._virtualDelayIndex+=r,this._virtualDelayIndex===i&&(this._virtualDelayIndex=0)}},{key:"processWithAccurateDelayIndices",value:function(e,t,n,r){var i=this._delayBufferLength,a=this._delayBuffer;a.set(e,this._virtualDelayIndex);for(var o=0;o<r;o++){var u=n[o],s=0|u,l=u%1;if(0===l)t[o]=a[s];else{var c=(s+1)%i;t[o]=a[s]+l*(a[c]-a[s])}}this._virtualDelayIndex+=r,this._virtualDelayIndex===i&&(this._virtualDelayIndex=0)}}]),e}(),Pi=ki,Ei=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ti(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mi(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Si=ht,Di=Pi,Ai=m.defaults,ji=m.toNumber,xi=J.MAX,Ii=Ae.AUDIO_RATE,Ri=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ti(this,t);var r=Ai(n.maxDelayTime,1),i=Ai(n.delayTime,0);r=Math.max(0,ji(r)),i=Math.min(i,r);var a=Mi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:[1],channelCount:2,channelCountMode:xi}));return a._maxDelayTime=r,a._delayTime=a.addParam(Ii,i),a.dspInit(a._maxDelayTime),a.dspUpdateKernel(1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Si),Ei(t,[{key:"getDelayTime",value:function(){return this._delayTime}},{key:"getMaxDelayTime",value:function(){return this._maxDelayTime}},{key:"channelDidUpdate",value:function(e){this.dspUpdateKernel(e),this.outputs[0].setNumberOfChannels(e)}},{key:"getTailTime",value:function(){return this._maxDelayTime}}]),t}();Object.assign(Ri.prototype,Di);var Fi=Ri,Ni={dspProcess:function(){var e=this.outputs[0].bus;e.zeros(),e.sumFrom(this.inputs[0].bus)}},Vi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zi(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ui=ht,Bi=Ni,$i=m.defaults,qi=J.EXPLICIT,Wi=Ae.CONTROL_RATE,Xi=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Li(this,t);var r=$i(n.threshold,-24),i=$i(n.knee,30),a=$i(n.ratio,12),o=$i(n.attack,.003),u=$i(n.release,.25),s=zi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:[2],channelCount:2,channelCountMode:qi}));return s._threshold=s.addParam(Wi,r),s._knee=s.addParam(Wi,i),s._ratio=s.addParam(Wi,a),s._attack=s.addParam(Wi,o),s._release=s.addParam(Wi,u),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ui),Vi(t,[{key:"getThreshold",value:function(){return this._threshold}},{key:"getKnee",value:function(){return this._knee}},{key:"getRatio",value:function(){return this._ratio}},{key:"getReduction",value:function(){throw new TypeError("NOT YET IMPLEMENTED")}},{key:"getAttack",value:function(){return this._attack}},{key:"getRelease",value:function(){return this._release}}]),t}();Object.assign(Xi.prototype,Bi);var Gi=Xi,Yi={},Hi={dspProcess:function(){var e=this.inputs[0].bus,t=this.outputs[0].bus;if(e.isSilent)t.zeros();else{var n=this._gain;if(n.hasSampleAccurateValues()){var r=e.getChannelData(),i=t.getMutableData(),a=n.getSampleAccurateValues();Zi(r.length,1e3)(r,i,a,this.blockSize)}else{var o=n.getValue();if(0!==o)if(1!==o){var u=e.getChannelData(),s=t.getMutableData();Zi(s.length,2e3)(u,s,o,this.blockSize)}else t.copyFrom(e);else t.zeros()}}}};function Zi(e,t){var n=e+t;return Yi[n]?Yi[n]:Yi[t]}Yi[1e3]=function(e,t,n,r){for(var i=e.length,a=0;a<i;a++)for(var o=0;o<r;o++)t[a][o]=e[a][o]*n[o]},Yi[1001]=function(e,t,n,r){for(var i=e[0],a=t[0],o=0;o<r;o++)a[o]=i[o]*n[o]},Yi[1002]=function(e,t,n,r){for(var i=e[0],a=e[1],o=t[0],u=t[1],s=0;s<r;s++)o[s]=i[s]*n[s],u[s]=a[s]*n[s]},Yi[2e3]=function(e,t,n,r){for(var i=e.length,a=0;a<i;a++)for(var o=0;o<r;o++)t[a][o]=e[a][o]*n},Yi[2001]=function(e,t,n,r){for(var i=e[0],a=t[0],o=0;o<r;o++)a[o]=i[o]*n},Yi[2002]=function(e,t,n,r){for(var i=e[0],a=e[1],o=t[0],u=t[1],s=0;s<r;s++)o[s]=i[s]*n,u[s]=a[s]*n};var Ki=Hi,Qi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ea(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ta=ht,na=Ki,ra=m.defaults,ia=J.MAX,aa=Ae.AUDIO_RATE,oa=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ji(this,t);var r=ra(n.gain,1),i=ea(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:[1],channelCount:2,channelCountMode:ia}));return i._gain=i.addParam(aa,r),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ta),Qi(t,[{key:"getGain",value:function(){return this._gain}},{key:"channelDidUpdate",value:function(e){this.outputs[0].setNumberOfChannels(e)}}]),t}();Object.assign(oa.prototype,na);var ua=oa,sa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function la(e,t){for(var n=new Float32Array(e.length),r=0,i=n.length;r<i;r++)n[r]=e[i-r-1]/t;return n}function ca(e){return Math.abs(e)<1175494e-44?0:e}var fa=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.a=la(n,n[0]),this.b=la(t,n[0]),this.x=new Float32Array(this.b.length),this.y=new Float32Array(this.a.length)}return sa(e,[{key:"process",value:function(e,t,n){for(var r=this.a,i=this.b,a=this.x,o=this.y,u=this.a.length-1,s=this.b.length,l=0;l<n;l++){a[s-1]=e[l],o[u]=0;for(var c=0;c<s;c++)o[u]+=i[c]*a[c],a[c]=ca(a[c+1]);for(var f=0;f<u;f++)o[u]-=r[f]*o[f],o[f]=ca(o[f+1]);t[l]=o[u]}}}]),e}(),ha=ur.getFilterResponse,pa={dspInit:function(){this._kernels=[]},dspUpdateKernel:function(e){if(e<this._kernels.length)this._kernels.splice(e);else if(this._kernels.length<e)for(;e!==this._kernels.length;)this._kernels.push(new fa(this._feedforward,this._feedback));switch(e){case 1:this.dspProcess=this.dspProcess1;break;case 2:this.dspProcess=this.dspProcess2;break;default:this.dspProcess=this.dspProcessN}},dspProcess1:function(){var e=this.inputs[0].bus.getChannelData(),t=this.outputs[0].bus.getMutableData();this._kernels[0].process(e[0],t[0],this.blockSize)},dspProcess2:function(){var e=this.blockSize,t=this.inputs[0].bus.getChannelData(),n=this.outputs[0].bus.getMutableData(),r=this._kernels;r[0].process(t[0],n[0],e),r[1].process(t[1],n[1],e)},dspProcessN:function(){for(var e=this.blockSize,t=this.inputs[0].bus.getChannelData(),n=this.outputs[0].bus.getMutableData(),r=this._kernels,i=0,a=r.length;i<a;i++)r[i].process(t[i],n[i],e)},dspGetFrequencyResponse:function(e,t,n){var r=this._feedforward,i=this._feedback;ha(r,i,e,t,n,this.sampleRate)}},ma=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ba=ht,da=pa,va=m.defaults,ga=J.MAX,wa=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ya(this,t);var r=va(n.feedforward,[0]),i=va(n.feedback,[1]),a=_a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:[1],channelCount:2,channelCountMode:ga}));return a._feedforward=r,a._feedback=i,a.dspInit(),a.dspUpdateKernel(1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ba),ma(t,[{key:"getFrequencyResponse",value:function(e,t,n){this.dspGetFrequencyResponse(e,t,n)}},{key:"getFeedforward",value:function(){return this._feedforward}},{key:"getFeedback",value:function(){return this._feedback}},{key:"channelDidUpdate",value:function(e){this.dspUpdateKernel(e),this.outputs[0].setNumberOfChannels(e)}}]),t}();Object.assign(wa.prototype,da);var Oa=wa,ka={dspInit:function(){this._waveTable=null},dspBuildWaveTable:function(){if(null!==this._waveTable)return this._waveTable;for(var e=new Float32Array(8193),t=this._real,n=this._imag,r=0,i=Math.min(t.length,16),a=0;a<8192;a++){for(var o=a/8192*Math.PI*2,u=1;u<i;u++)e[a]+=t[u]*Math.cos(u*o)+n[u]*Math.sin(u*o);r=Math.max(r,Math.abs(e[a]))}if(!this._constants&&1!==r)for(var s=0;s<8192;s++)e[s]*=r;return e[8192]=e[0],this._waveTable=e,e}},Ca={SINE:"sine",SAWTOOTH:"sawtooth",TRIANGLE:"triangle",SQUARE:"square",CUSTOM:"custom"},Pa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ta=n,Ma=ka,Sa=Ca.SINE,Da=Ca.SAWTOOTH,Aa=Ca.TRIANGLE,ja=Ca.SQUARE,xa=Ca.CUSTOM,Ia=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ea(this,e);var r=n.real,i=n.imag,a=n.constraints;this.context=t,this._real=r,this._imag=i,this._constants=!!a,this._name=xa,this.dspInit()}return Pa(e,[{key:"getReal",value:function(){return this._real}},{key:"getImag",value:function(){return this._imag}},{key:"getConstraints",value:function(){return this._constants}},{key:"getName",value:function(){return this._name}},{key:"getWaveTable",value:function(){return this._waveTable||(this._waveTable=this.dspBuildWaveTable()),this._waveTable}},{key:"generateBasicWaveform",value:function(e){var t=512;switch(e){case Sa:this._real=new Float32Array([0,0]),this._imag=new Float32Array([0,1]),this._name=Sa;break;case Da:this._real=new Float32Array(t),this._imag=new Float32Array(Ta(t,(function(e,t){return 0===t?0:Math.pow(-1,t+1)*(2/(t*Math.PI))}))),this._name=Da,this.dspBuildWaveTable();break;case Aa:this._real=new Float32Array(t),this._imag=new Float32Array(Ta(t,(function(e,t){return 0===t?0:8*Math.sin(t*Math.PI/2)/Math.pow(t*Math.PI,2)}))),this._name=Aa,this.dspBuildWaveTable();break;case ja:this._real=new Float32Array(t),this._imag=new Float32Array(Ta(t,(function(e,t){return 0===t?0:2/(t*Math.PI)*(1-Math.pow(-1,t))}))),this._name=ja,this.dspBuildWaveTable();break;default:this._real=new Float32Array([0]),this._imag=new Float32Array([0]),this._name=xa,this.dspBuildWaveTable()}}}]),e}();Object.assign(Ia.prototype,Ma);var Ra=Ia,Fa=Ca.SINE,Na={dspInit:function(){this._phase=0},dspProcess:function(){var e=this,t=this.blockSize,n=this.context.currentSampleFrame,r=n+t,i=Math.max(0,this._startFrame-n),a=Math.min(r,this._stopFrame)-n,o=this.outputs[0].bus.getMutableData()[0],u=0;if(u=this._type===Fa?this.dspSine(o,i,a,this.sampleRate):this.dspWave(o,i,a,this.sampleRate),this._stopFrame<=n+u){for(;u<t;)o[u++]=0;this.context.addPostProcess((function(){e.outputs[0].bus.zeros(),e.outputs[0].disable(),e.dispatchEvent({type:"ended"})}))}},dspSine:function(e,t,n,r){var i=this._frequency,a=this._detune,o=2*i.hasSampleAccurateValues()+a.hasSampleAccurateValues(),u=2*Math.PI/r,s=this._phase;if(0===o)for(var l=i.getValue(),c=a.getValue(),f=u*(l*Math.pow(2,c/1200));t<n;)e[t++]=Math.sin(s),s+=f;else for(var h=i.getSampleAccurateValues(),p=a.getSampleAccurateValues();t<n;){var m=h[t],y=p[t],_=m*Math.pow(2,y/1200);e[t++]=Math.sin(s),s+=u*_}return this._phase=s,t},dspWave:function(e,t,n,r){var i=this._frequency,a=this._detune,o=2*i.hasSampleAccurateValues()+a.hasSampleAccurateValues(),u=this._waveTable,s=u.length-1,l=1/r,c=this._phase;if(0===o)for(var f=i.getValue(),h=a.getValue(),p=l*(f*Math.pow(2,h/1200));t<n;){var m=c*s%s,y=u[0|m],_=u[1+(0|m)];e[t++]=y+m%1*(_-y),c+=p}else for(var b=i.getSampleAccurateValues(),d=a.getSampleAccurateValues();t<n;){var v=b[t],g=d[t],w=v*Math.pow(2,g/1200),O=c*s%s,k=u[0|O],C=u[1+(0|O)];e[t++]=k+O%1*(C-k),c+=l*w}return this._phase=c,t}},Va=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function La(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function za(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ua=Jt,Ba=Ra,$a=Na,qa=m.defaults,Wa=m.toImpl,Xa=Ae.AUDIO_RATE,Ga=Ca.SINE,Ya=Ca.CUSTOM,Ha={},Za=[Ga,Ca.SAWTOOTH,Ca.TRIANGLE,Ca.SQUARE],Ka=Ga,Qa=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};La(this,t);var r=qa(n.type,Ka),i=qa(n.frequency,440),a=qa(n.detune,0),o=za(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o._frequency=o.addParam(Xa,i),o._detune=o.addParam(Xa,a),o._type=r,o._periodicWave=o.buildPeriodicWave(o._type),o._waveTable=null,o.dspInit(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ua),Va(t,[{key:"getType",value:function(){return this._type}},{key:"setType",value:function(e){-1!==Za.indexOf(e)&&(this._type=e,this._periodicWave=this.buildPeriodicWave(e),this._waveTable=this._periodicWave.getWaveTable())}},{key:"getFrequency",value:function(){return this._frequency}},{key:"getDetune",value:function(){return this._detune}},{key:"setPeriodicWave",value:function(e){(e=Wa(e))instanceof Ba&&(this._type=Ya,this._periodicWave=e,this._waveTable=this._periodicWave.getWaveTable())}},{key:"getPeriodicWave",value:function(){return this._periodicWave}},{key:"buildPeriodicWave",value:function(e){var t=this.context.sampleRate,n=e+":"+t;if(!Ha[n]){var r=new Ba({sampleRate:t},{constraints:!1});r.generateBasicWaveform(e),Ha[n]=r}return Ha[n]}}]),t}();Object.assign(Qa.prototype,$a);var Ja=Qa,eo=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function to(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function no(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ro=ht,io=m.defaults,ao=m.toNumber,oo=J.CLAMPED_MAX,uo=J.EXPLICIT,so=["equalpower","HRTF"],lo=["linear","inverse","exponential"],co=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};to(this,t);var r=io(n.panningModel,"equalpower"),i=io(n.distanceModel,"inverse"),a=io(n.refDistance,1),o=io(n.maxDistance,1e4),u=io(n.rolloffFactor,1),s=io(n.coneInnerAngle,360),l=io(n.coneOuterAngle,360),c=io(n.coneOuterGain,0),f=no(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:[2],channelCount:2,channelCountMode:oo,allowedMaxChannelCount:2,allowedChannelCountMode:[oo,uo]}));return f._panningModel=r,f._distanceModel=i,f._refDistance=a,f._maxDistance=o,f._rolloffFactor=u,f._coneInnerAngle=s,f._coneOuterAngle=l,f._coneOuterGain=c,f}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ro),eo(t,[{key:"getPanningModel",value:function(){return this._panningModel}},{key:"setPanningModel",value:function(e){-1!==so.indexOf(e)&&(this._panningModel=e)}},{key:"getDistanceModel",value:function(){return this._distanceModel}},{key:"setDistanceModel",value:function(e){-1!==lo.indexOf(e)&&(this._distanceModel=e)}},{key:"getRefDistance",value:function(){return this._refDistance}},{key:"setRefDistance",value:function(e){this._refDistance=ao(e)}},{key:"getMaxDistance",value:function(){return this._maxDistance}},{key:"setMaxDistance",value:function(e){this._maxDistance=ao(e)}},{key:"getRolloffFactor",value:function(){return this._rolloffFactor}},{key:"setRolloffFactor",value:function(e){this._rolloffFactor=ao(e)}},{key:"getConeInnerAngle",value:function(){return this._coneInnerAngle}},{key:"setConeInnerAngle",value:function(e){this._coneInnerAngle=ao(e)}},{key:"getConeOuterAngle",value:function(){return this._coneOuterAngle}},{key:"setConeOuterAngle",value:function(e){this._coneOuterAngle=ao(e)}},{key:"getConeOuterGain",value:function(){return this._coneOuterGain}},{key:"setConeOuterGain",value:function(e){this._coneOuterGain=ao(e)}}]),t}(),fo={dspProcess:function(){var e=this.outputs[0].bus;e.zeros(),e.sumFrom(this.inputs[0].bus)}},ho=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var po=co,mo=fo,yo=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,po),ho(t,[{key:"setPosition",value:function(){throw new TypeError("NOT YET IMPLEMENTED")}},{key:"setOrientation",value:function(){throw new TypeError("NOT YET IMPLEMENTED")}},{key:"setVelocity",value:function(){throw new TypeError("NOT YET IMPLEMENTED")}}]),t}();Object.assign(yo.prototype,mo);var _o=yo,bo=Ut,vo=m.fill,go={dspInit:function(){this._eventItem=null,this._inputChannelData=null,this._outputChannelData=null,this._writeIndex=0},dspSetEventItem:function(e){var t=this.inputs[0].getNumberOfChannels(),n=this.outputs[0].getNumberOfChannels(),r=new bo({numberOfChannels:t,length:this._bufferSize,sampleRate:this.sampleRate}),i=new bo({numberOfChannels:n,length:this._bufferSize,sampleRate:this.sampleRate});e.inputBuffer._impl=r,e.outputBuffer._impl=i,this._inputChannelData=r.audioData.channelData,this._outputChannelData=i.audioData.channelData,this._eventItem=e},dspProcess:function(){for(var e=this,t=this.blockSize,n=this.context.currentSampleFrame+t,r=this.inputs[0].bus.getChannelData(),i=this.outputs[0].bus.getMutableData(),a=this._inputChannelData,o=this._outputChannelData,u=r.length,s=i.length,l=this._writeIndex,c=l+t,f=0;f<u;f++)a[f].set(r[f],l);for(var h=0;h<s;h++)i[h].set(o[h].subarray(l,c));if(this._writeIndex+=t,this._writeIndex===this._bufferSize){var p=n/this.sampleRate;this.context.addPostProcess((function(){for(var t=0;t<s;t++)vo(o[t],0);e._eventItem.playbackTime=p,e.dispatchEvent(e._eventItem)})),this._writeIndex=0}}},wo=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Oo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ko(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Co=ht,Po=go,Eo=m,To=Eo.defaults,Mo=Eo.clamp,So=m,Do=So.toPowerOfTwo,Ao=So.toValidNumberOfChannels,jo=J.EXPLICIT,xo=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oo(this,t);var r=To(n.bufferSize,1024),i=To(n.numberOfInputChannels,1),a=To(n.numberOfOutputChannels,1);r=Mo(0|r,256,16384),r=Do(r,Math.ceil),i=Ao(i),a=Ao(a);var o=ko(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[i],outputs:[a],channelCount:i,channelCountMode:jo,allowedMaxChannelCount:i,allowedMinChannelCount:i,allowedChannelCountMode:[jo]}));return o._bufferSize=r,o.enableOutputsIfNecessary(),o.dspInit(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Co),wo(t,[{key:"getBufferSize",value:function(){return this._bufferSize}},{key:"setEventItem",value:function(e){this.dspSetEventItem(e)}},{key:"getTailTime",value:function(){return 1/0}}]),t}();Object.assign(xo.prototype,Po);var Io=xo,Ro={dspProcess:function(){var e=this.outputs[0].bus;e.zeros(),e.sumFrom(this.inputs[0].bus)}},Fo=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var No=co,Vo=Ro,Lo=Ae.AUDIO_RATE,zo=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._positionX=r.addParam(Lo,0),r._positionY=r.addParam(Lo,0),r._positionZ=r.addParam(Lo,0),r._orientationX=r.addParam(Lo,0),r._orientationY=r.addParam(Lo,0),r._orientationZ=r.addParam(Lo,0),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,No),Fo(t,[{key:"getPositionX",value:function(){return this._positionX}},{key:"getPositionY",value:function(){return this._positionY}},{key:"getPositionZ",value:function(){return this._positionZ}},{key:"getOrientationX",value:function(){return this._positionX}},{key:"getOrientationY",value:function(){return this._positionY}},{key:"getOrientationZ",value:function(){return this._positionZ}}]),t}();Object.assign(zo.prototype,Vo);var Uo=zo,Bo={dspProcess:function(){var e=this.inputs[0].bus,t=this.outputs[0].bus;if(e.isSilent)t.zeros();else{var n=this._pan;n.hasSampleAccurateValues()?this.dspSampleAccurateValues(e,t,n.getSampleAccurateValues(),this.blockSize):this.dspStaticValue(e,t,n.getValue(),this.blockSize)}},dspSampleAccurateValues:function(e,t,n,r){var i=t.getMutableData();if(1===e.getNumberOfChannels())for(var a=e.getChannelData()[0],o=0;o<r;o++){var u=.5*(.5*Math.max(-1,Math.min(n[o],1))+.5)*Math.PI,s=Math.cos(u),l=Math.sin(u);i[0][o]=a[o]*s,i[1][o]=a[o]*l}else for(var c=e.getChannelData(),f=0;f<r;f++){var h=Math.max(-1,Math.min(n[f],1)),p=.5*(h<=0?h+1:h)*Math.PI,m=Math.cos(p),y=Math.sin(p);h<=0?(i[0][f]=c[0][f]+c[1][f]*m,i[1][f]=c[1][f]*y):(i[0][f]=c[0][f]*m,i[1][f]=c[1][f]+c[0][f]*y)}},dspStaticValue:function(e,t,n,r){var i=t.getMutableData(),a=e.getNumberOfChannels();if(n=Math.max(-1,Math.min(n,1)),1===a)for(var o=e.getChannelData()[0],u=.5*(.5*n+.5)*Math.PI,s=Math.cos(u),l=Math.sin(u),c=0;c<r;c++)i[0][c]=o[c]*s,i[1][c]=o[c]*l;else{var f=e.getChannelData(),h=.5*(n<=0?n+1:n)*Math.PI,p=Math.cos(h),m=Math.sin(h);if(n<=0)for(var y=0;y<r;y++)i[0][y]=f[0][y]+f[1][y]*p,i[1][y]=f[1][y]*m;else for(var _=0;_<r;_++)i[0][_]=f[0][_]*p,i[1][_]=f[1][_]+f[0][_]*m}}},$o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function qo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wo(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Xo=co,Go=Bo,Yo=m.defaults,Ho=Ae.AUDIO_RATE,Zo=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qo(this,t);var r=Yo(n.pan,0),i=Wo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._pan=i.addParam(Ho,r),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Xo),$o(t,[{key:"getPan",value:function(){return this._pan}}]),t}();Object.assign(Zo.prototype,Go);var Ko=Zo,Qo=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Jo={dspInit:function(){this._kernels=[]},dspUpdateKernel:function(e,t){if(null===e&&(t=0),t<this._kernels.length)this._kernels.splice(t);else if(this._kernels.length<t)for(;t!==this._kernels.length;)this._kernels.push(new eu(this,this._kernels.length));switch(t){case 0:this.dspProcess=this.dspProcess0;break;case 1:this.dspProcess=this.dspProcess1;break;case 2:this.dspProcess=this.dspProcess2;break;default:this.dspProcess=this.dspProcessN}},dspProcess0:function(){this.outputs[0].bus.copyFrom(this.inputs[0].bus)},dspProcess1:function(){var e=this.inputs[0].bus,t=this.outputs[0].bus,n=e.getChannelData(),r=t.getMutableData();this._kernels[0].process(n[0],r[0],this._curve,this.blockSize)},dspProcess2:function(){var e=this.inputs[0].bus,t=this.outputs[0].bus,n=e.getChannelData(),r=t.getMutableData(),i=this.blockSize,a=this._curve,o=this._kernels;o[0].process(n[0],r[0],a,i),o[1].process(n[1],r[1],a,i)},dspProcessN:function(){for(var e=this.inputs[0].bus,t=this.outputs[0].bus,n=e.getChannelData(),r=t.getMutableData(),i=this.blockSize,a=this._curve,o=this._kernels,u=0,s=o.length;u<s;u++)o[u].process(n[u],r[u],a,i)}},eu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Qo(e,[{key:"process",value:function(e,t,n,r){for(var i=0;i<r;i++){var a=.5*(Math.max(-1,Math.min(e[i],1))+1)*(n.length-1),o=0|a,u=o+1;n.length<=u?t[i]=n[n.length-1]:t[i]=n[o]+a%1*(n[u]-n[o])}}}]),e}(),tu=Jo,nu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ru(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var au=ht,ou=tu,uu=m.defaults,su=J.MAX,lu=["none","2x","4x"],cu=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ru(this,t);var r=uu(n.curve,null),i=uu(n.overSample,"none"),a=iu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{inputs:[1],outputs:[1],channelCount:2,channelCountMode:su}));return a._curve=r,a._overSample=i,a.dspInit(),a.dspUpdateKernel(null,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,au),nu(t,[{key:"getCurve",value:function(){return this._curve}},{key:"setCurve",value:function(e){(null===e||e instanceof Float32Array)&&(this._curve=e,this.dspUpdateKernel(this._curve,this.outputs[0].getNumberOfChannels()))}},{key:"getOversample",value:function(){return this._overSample}},{key:"setOversample",value:function(e){-1!==lu.indexOf(e)&&(this._overSample=e)}},{key:"channelDidUpdate",value:function(e){this.dspUpdateKernel(this._curve,e),this.outputs[0].setNumberOfChannels(e)}}]),t}();Object.assign(cu.prototype,ou);var fu=cu;s.exports={AnalyserNode:xt,AudioBuffer:Ut,AudioBufferSourceNode:_n,AudioContext:Xn,AudioDestinationNode:Cn,AudioListener:En,AudioNode:ht,AudioParam:Ge,BiquadFilterNode:Pr,ChannelMergerNode:Lr,ChannelSplitterNode:Zr,ConstantSourceNode:si,ConvolverNode:wi,DelayNode:Fi,DynamicsCompressorNode:Gi,GainNode:ua,IIRFilterNode:Oa,OscillatorNode:Ja,PannerNode:_o,PeriodicWave:Ra,ScriptProcessorNode:Io,SpatialPannerNode:Uo,StereoPannerNode:Ko,WaveShaperNode:fu};var hu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var pu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return hu(e,[{key:"addEventListener",value:function(e,t){this._impl.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this._impl.removeEventListener(e,t)}}]),e}(),mu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var yu=pu,_u=m.defineProp,bu=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return _u(n,"_context",e),_u(n,"_impl",null),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,yu),mu(t,[{key:"connect",value:function(e,n,r){if(this._impl.connect(e._impl,n,r),e instanceof t)return e}},{key:"disconnect",value:function(){this._impl.disconnect.apply(this._impl,arguments)}},{key:"context",get:function(){return this._context}},{key:"numberOfInputs",get:function(){return this._impl.getNumberOfInputs()}},{key:"numberOfOutputs",get:function(){return this._impl.getNumberOfOutputs()}},{key:"channelCount",get:function(){return this._impl.getChannelCount()},set:function(e){this._impl.setChannelCount(e)}},{key:"channelCountMode",get:function(){return this._impl.getChannelCountMode()},set:function(e){this._impl.setChannelCountMode(e)}},{key:"channelInterpretation",get:function(){return this._impl.getChannelInterpretation()},set:function(e){return this._impl.setChannelInterpretation(e)}}]),t}(),du=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var vu=bu,gu=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vu),du(t,[{key:"maxChannelCount",get:function(){return this._impl.getMaxChannelCount()}}]),t}(),wu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ou=m.defineProp,ku=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ou(this,"_impl",n)}return wu(e,[{key:"setPosition",value:function(e,t,n){this._impl.setPosition(e,t,n)}},{key:"setOrientation",value:function(e,t,n,r,i,a){this._impl.setOrientation(e,t,n,r,i,a)}}]),e}(),Cu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Pu=s.exports,Eu=m.defineProp,Tu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Eu(this,"_impl",new Pu.AudioBuffer(t))}return Cu(e,[{key:"getChannelData",value:function(e){return this._impl.getChannelData(e)}},{key:"copyFromChannel",value:function(e,t,n){this._impl.copyFromChannel(e,t,n)}},{key:"copyToChannel",value:function(e,t,n){this._impl.copyToChannel(e,t,n)}},{key:"sampleRate",get:function(){return this._impl.getSampleRate()}},{key:"length",get:function(){return this._impl.getLength()}},{key:"duration",get:function(){return this._impl.getDuration()}},{key:"numberOfChannels",get:function(){return this._impl.getNumberOfChannels()}}]),e}(),Mu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Su(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Du(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Au=bu,ju=function(e){function t(){return Su(this,t),Du(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Au),Mu(t,[{key:"start",value:function(e){this._impl.start(e)}},{key:"stop",value:function(e){this._impl.stop(e)}},{key:"onended",get:function(){return this._impl.$onended},set:function(e){this._impl.replaceEventListener("ended",this._impl.$onended,e),this._impl.$onended=e}}]),t}(),xu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Iu=m.defineProp,Ru=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Iu(this,"_context",t),Iu(this,"_impl",n)}return xu(e,[{key:"setValueAtTime",value:function(e,t){return this._impl.setValueAtTime(e,t),this}},{key:"linearRampToValueAtTime",value:function(e,t){return this._impl.linearRampToValueAtTime(e,t),this}},{key:"exponentialRampToValueAtTime",value:function(e,t){return this._impl.exponentialRampToValueAtTime(e,t),this}},{key:"setTargetAtTime",value:function(e,t,n){return this._impl.setTargetAtTime(e,t,n),this}},{key:"setValueCurveAtTime",value:function(e,t,n){return this._impl.setValueCurveAtTime(e,t,n),this}},{key:"cancelScheduledValues",value:function(e){return this._impl.cancelScheduledValues(e),this}},{key:"value",get:function(){return this._impl.getValue()},set:function(e){this._impl.setValue(e)}},{key:"defaultValue",get:function(){return this._impl.getDefaultValue()}}]),e}(),Fu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Nu=s.exports,Vu=ju,Lu=Ru,zu=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Nu.AudioBufferSourceNode(e._impl,n),r._impl.$playbackRate=new Lu(e,r._impl.getPlaybackRate()),r._impl.$detune=new Lu(e,r._impl.getDetune()),r._impl.$buffer=null,r._impl.$onended=null,n&&n.buffer&&(r.buffer=n.buffer),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Vu),Fu(t,[{key:"start",value:function(e,t,n){this._impl.start(e,t,n)}},{key:"buffer",get:function(){return this._impl.$buffer},set:function(e){this._impl.$buffer=e,this._impl.setBuffer(e)}},{key:"playbackRate",get:function(){return this._impl.$playbackRate}},{key:"detune",get:function(){return this._impl.$detune}},{key:"loop",get:function(){return this._impl.getLoop()},set:function(e){this._impl.setLoop(e)}},{key:"loopStart",get:function(){return this._impl.getLoopStart()},set:function(e){this._impl.setLoopStart(e)}},{key:"loopEnd",get:function(){return this._impl.getLoopEnd()},set:function(e){this._impl.setLoopEnd(e)}}]),t}(),Uu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Bu=s.exports,$u=bu,qu=Tu,Wu=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Bu.ScriptProcessorNode(e._impl,n),r._impl.$onaudioprocess=null,r._impl.setEventItem({type:"audioprocess",playbackTime:0,inputBuffer:new qu,outputBuffer:new qu}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,$u),Uu(t,[{key:"bufferSize",get:function(){return this._impl.getBufferSize()}},{key:"onaudioprocess",get:function(){return this._impl.$onaudioprocess},set:function(e){this._impl.replaceEventListener("audioprocess",this._impl.$onaudioprocess,e),this._impl.$onaudioprocess=e}}]),t}(),Xu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Gu=s.exports,Yu=bu,Hu=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Gu.AnalyserNode(e._impl,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Yu),Xu(t,[{key:"getFloatFrequencyData",value:function(e){this._impl.getFloatFrequencyData(e)}},{key:"getByteFrequencyData",value:function(e){this._impl.getByteFrequencyData(e)}},{key:"getFloatTimeDomainData",value:function(e){this._impl.getFloatTimeDomainData(e)}},{key:"getByteTimeDomainData",value:function(e){this._impl.getByteTimeDomainData(e)}},{key:"fftSize",get:function(){return this._impl.getFftSize()},set:function(e){this._impl.setFftSize(e)}},{key:"frequencyBinCount",get:function(){return this._impl.getFrequencyBinCount()}},{key:"minDecibels",get:function(){return this._impl.getMinDecibels()},set:function(e){this._impl.setMinDecibels(e)}},{key:"maxDecibels",get:function(){return this._impl.getMaxDecibels()},set:function(e){this._impl.setMaxDecibels(e)}},{key:"smoothingTimeConstant",get:function(){return this._impl.getSmoothingTimeConstant()},set:function(e){this._impl.setSmoothingTimeConstant(e)}}]),t}(),Zu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ku=s.exports,Qu=bu,Ju=Ru,es=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Ku.GainNode(e._impl,n),r._impl.$gain=new Ju(e,r._impl.getGain()),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Qu),Zu(t,[{key:"gain",get:function(){return this._impl.$gain}}]),t}(),ts=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ns=s.exports,rs=bu,is=Ru,as=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new ns.DelayNode(e._impl,n),r._impl.$delayTime=new is(e,r._impl.getDelayTime()),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,rs),ts(t,[{key:"delayTime",get:function(){return this._impl.$delayTime}}]),t}(),os=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var us=s.exports,ss=bu,ls=Ru,cs=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new us.BiquadFilterNode(e._impl,n),r._impl.$frequency=new ls(e,r._impl.getFrequency()),r._impl.$detune=new ls(e,r._impl.getDetune()),r._impl.$Q=new ls(e,r._impl.getQ()),r._impl.$gain=new ls(e,r._impl.getGain()),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ss),os(t,[{key:"getFrequencyResponse",value:function(e,t,n){this._impl.getFrequencyResponse(e,t,n)}},{key:"type",get:function(){return this._impl.getType()},set:function(e){this._impl.setType(e)}},{key:"frequency",get:function(){return this._impl.$frequency}},{key:"detune",get:function(){return this._impl.$detune}},{key:"Q",get:function(){return this._impl.$Q}},{key:"gain",get:function(){return this._impl.$gain}}]),t}(),fs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var hs=s.exports,ps=bu,ms=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new hs.IIRFilterNode(e._impl,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ps),fs(t,[{key:"getFrequencyResponse",value:function(e,t,n){this._impl.getFrequencyResponse(e,t,n)}}]),t}(),ys=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var _s=s.exports,bs=bu,ds=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new _s.WaveShaperNode(e._impl,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,bs),ys(t,[{key:"curve",get:function(){return this._impl.getCurve()},set:function(e){this._impl.setCurve(e)}},{key:"oversample",get:function(){return this._impl.getOversample()},set:function(e){this._impl.setOversample(e)}}]),t}(),vs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var gs=s.exports,ws=bu,Os=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new gs.PannerNode(e._impl,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ws),vs(t,[{key:"setPosition",value:function(e,t,n){this._impl.setPosition(e,t,n)}},{key:"setOrientation",value:function(e,t,n){this._impl.setOrientation(e,t,n)}},{key:"setVelocity",value:function(e,t,n){this._impl.setVelocity(e,t,n)}},{key:"panningModel",get:function(){return this._impl.getPanningModel()},set:function(e){this._impl.setPanningModel(e)}},{key:"distanceModel",get:function(){return this._impl.getDistanceModel()},set:function(e){this._impl.setDistanceModel(e)}},{key:"refDistance",get:function(){return this._impl.getRefDistance()},set:function(e){this._impl.setRefDistance(e)}},{key:"maxDistance",get:function(){return this._impl.getMaxDistance()},set:function(e){this._impl.setMaxDistance(e)}},{key:"rolloffFactor",get:function(){return this._impl.getRolloffFactor()},set:function(e){this._impl.setRolloffFactor(e)}},{key:"coneInnerAngle",get:function(){return this._impl.getConeInnerAngle()},set:function(e){this._impl.setConeInnerAngle(e)}},{key:"coneOuterAngle",get:function(){return this._impl.getConeOuterAngle()},set:function(e){this._impl.setConeOuterAngle(e)}},{key:"coneOuterGain",get:function(){return this._impl.getConeOuterGain()},set:function(e){this._impl.setConeOuterGain(e)}}]),t}(),ks=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Cs=s.exports,Ps=bu,Es=Ru,Ts=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Cs.SpatialPannerNode(e._impl,n),r._impl.$positionX=new Es(e,r._impl.getPositionX()),r._impl.$positionY=new Es(e,r._impl.getPositionY()),r._impl.$positionZ=new Es(e,r._impl.getPositionZ()),r._impl.$orientationX=new Es(e,r._impl.getOrientationX()),r._impl.$orientationY=new Es(e,r._impl.getOrientationY()),r._impl.$orientationZ=new Es(e,r._impl.getOrientationZ()),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ps),ks(t,[{key:"panningModel",get:function(){return this._impl.getPanningModel()},set:function(e){this._impl.setPanningModel(e)}},{key:"positionX",get:function(){return this._impl.$positionX}},{key:"positionY",get:function(){return this._impl.$positionY}},{key:"positionZ",get:function(){return this._impl.$positionZ}},{key:"orientationX",get:function(){return this._impl.$orientationX}},{key:"orientationY",get:function(){return this._impl.$orientationY}},{key:"orientationZ",get:function(){return this._impl.$orientationZ}},{key:"distanceModel",get:function(){return this._impl.getDistanceModel()},set:function(e){this._impl.setDistanceModel(e)}},{key:"refDistance",get:function(){return this._impl.getRefDistance()},set:function(e){this._impl.setRefDistance(e)}},{key:"maxDistance",get:function(){return this._impl.getMaxDistance()},set:function(e){this._impl.setMaxDistance(e)}},{key:"rolloffFactor",get:function(){return this._impl.getRolloffFactor()},set:function(e){this._impl.setRolloffFactor(e)}},{key:"coneInnerAngle",get:function(){return this._impl.getConeInnerAngle()},set:function(e){this._impl.setConeInnerAngle(e)}},{key:"coneOuterAngle",get:function(){return this._impl.getConeOuterAngle()},set:function(e){this._impl.setConeOuterAngle(e)}},{key:"coneOuterGain",get:function(){return this._impl.getConeOuterGain()},set:function(e){this._impl.setConeOuterGain(e)}}]),t}(),Ms=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ss=s.exports,Ds=bu,As=Ru,js=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Ss.StereoPannerNode(e._impl,n),r._impl.$pan=new As(e,r._impl.getPan()),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ds),Ms(t,[{key:"pan",get:function(){return this._impl.$pan}}]),t}(),xs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Is=s.exports,Rs=bu,Fs=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Is.ConvolverNode(e._impl,n),r._impl.$buffer=null,n&&n.buffer&&(r.buffer=n.buffer),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Rs),xs(t,[{key:"buffer",get:function(){return this._impl.$buffer},set:function(e){this._impl.$buffer=e,this._impl.setBuffer(e)}},{key:"normalize",get:function(){return this._impl.getNormalize()},set:function(e){this._impl.setNormalize(e)}}]),t}(),Ns=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Vs=s.exports,Ls=ju,zs=Ru,Us=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Vs.ConstantSourceNode(e._impl,n),r._impl.$offset=new zs(e,r._impl.getOffset()),r._impl.$onended=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ls),Ns(t,[{key:"offset",get:function(){return this._impl.$offset}}]),t}();var Bs=s.exports,$s=bu,qs=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Bs.ChannelSplitterNode(e._impl,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,$s),t}();var Ws=s.exports,Xs=bu,Gs=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Ws.ChannelMergerNode(e._impl,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Xs),t}(),Ys=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Hs=s.exports,Zs=bu,Ks=Ru,Qs=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new Hs.DynamicsCompressorNode(e._impl,n),r._impl.$threshold=new Ks(e,r._impl.getThreshold()),r._impl.$knee=new Ks(e,r._impl.getKnee()),r._impl.$ratio=new Ks(e,r._impl.getRatio()),r._impl.$attack=new Ks(e,r._impl.getAttack()),r._impl.$release=new Ks(e,r._impl.getRelease()),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Zs),Ys(t,[{key:"threshold",get:function(){return this._impl.$threshold}},{key:"knee",get:function(){return this._impl.$knee}},{key:"ratio",get:function(){return this._impl.$ratio}},{key:"reduction",get:function(){return this._impl.getReduction()}},{key:"attack",get:function(){return this._impl.$attack}},{key:"release",get:function(){return this._impl.$release}}]),t}(),Js=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var el=s.exports,tl=ju,nl=Ru,rl=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._impl=new el.OscillatorNode(e._impl,n),r._impl.$frequency=new nl(e,r._impl.getFrequency()),r._impl.$detune=new nl(e,r._impl.getDetune()),r._impl.$onended=null,n&&n.periodicWave&&r.setPeriodicWave(n.periodicWave),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,tl),Js(t,[{key:"setPeriodicWave",value:function(e){this._impl.setPeriodicWave(e)}},{key:"type",get:function(){return this._impl.getType()},set:function(e){this._impl.setType(e)}},{key:"frequency",get:function(){return this._impl.$frequency}},{key:"detune",get:function(){return this._impl.$detune}}]),t}();var il=s.exports,al=m.defineProp,ol=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),al(this,"_impl",new il.PeriodicWave(t._impl,n))},ul={exports:{}};!function(e){var n={1:"lpcm",3:"lpcm"};function r(e,n){n=n||{},t.Buffer&&e instanceof t.Buffer&&(e=Uint8Array.from(e).buffer);var r=function(e){var t=0;return{remain:function(){return e.byteLength-t},skip:function(e){t+=e},uint8:function(){var n=e.getUint8(t,!0);return t+=1,n},int16:function(){var n=e.getInt16(t,!0);return t+=2,n},uint16:function(){var n=e.getUint16(t,!0);return t+=2,n},uint32:function(){var n=e.getUint32(t,!0);return t+=4,n},string:function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.uint8());return t},pcm8:function(){var n=e.getUint8(t)-128;return t+=1,n<0?n/128:n/127},pcm8s:function(){var n=e.getUint8(t)-127.5;return t+=1,n/127.5},pcm16:function(){var n=e.getInt16(t,!0);return t+=2,n<0?n/32768:n/32767},pcm16s:function(){var n=e.getInt16(t,!0);return t+=2,n/32768},pcm24:function(){var n=e.getUint8(t+0)+(e.getUint8(t+1)<<8)+(e.getUint8(t+2)<<16),r=n>8388608?n-16777216:n;return t+=3,r<0?r/8388608:r/8388607},pcm24s:function(){var n=e.getUint8(t+0)+(e.getUint8(t+1)<<8)+(e.getUint8(t+2)<<16);return t+=3,(n>8388608?n-16777216:n)/8388608},pcm32:function(){var n=e.getInt32(t,!0);return t+=4,n<0?n/2147483648:n/2147483647},pcm32s:function(){var n=e.getInt32(t,!0);return t+=4,n/2147483648},pcm32f:function(){var n=e.getFloat32(t,!0);return t+=4,n},pcm64f:function(){var n=e.getFloat64(t,!0);return t+=8,n}}}(new DataView(e));if("RIFF"!==r.string(4))throw new TypeError("Invalid WAV file");if(r.uint32(),"WAVE"!==r.string(4))throw new TypeError("Invalid WAV file");var o=null,u=null;do{var s=r.string(4),l=r.uint32();switch(s){case"fmt ":if((o=i(r,l))instanceof Error)throw o;break;case"data":if((u=a(r,l,o,n))instanceof Error)throw u;break;default:r.skip(l)}}while(null===u);return u}function i(e,t){var r=e.uint16();if(!n.hasOwnProperty(r))return new TypeError("Unsupported format in WAV file: 0x"+r.toString(16));var i={formatId:r,floatingPoint:3===r,numberOfChannels:e.uint16(),sampleRate:e.uint32(),byteRate:e.uint32(),blockSize:e.uint16(),bitDepth:e.uint16()};return e.skip(t-16),i}function a(e,t,n,r){t=Math.min(t,e.remain());for(var i=Math.floor(t/n.blockSize),a=n.numberOfChannels,o=n.sampleRate,u=new Array(a),s=0;s<a;s++)u[s]=new Float32Array(i);var l=function(e,t,n,r,i){var a=r.bitDepth,o=r.floatingPoint?"f":i.symmetric?"s":"",u="pcm"+a+o;if(!e[u])return new TypeError("Not supported bit depth: "+r.bitDepth);for(var s=e[u].bind(e),l=r.numberOfChannels,c=0;c<n;c++)for(var f=0;f<l;f++)t[f][c]=s();return null}(e,u,i,n,r);return l instanceof Error?l:{numberOfChannels:a,length:i,sampleRate:o,channelData:u}}e.exports.decode=function(e,t){return new Promise((function(n){n(r(e,t))}))},e.exports.decode.sync=r}(ul);var sl=n,ll=u;function cl(e,t){if(e.sampleRate===t)return e;for(var n=e.sampleRate/t,r=e.channelData.length,i=Math.round(e.channelData[0].length/n),a=sl(r,(function(){return new Float32Array(i)})),o=0;o<i;o++)for(var u=o*n,s=0|u,l=s+1,c=u%1,f=0;f<r;f++){var h=e.channelData[f][s],p=e.channelData[f][l];a[f][o]=h+c*(p-h)}return{numberOfChannels:r,length:i,sampleRate:t,channelData:a}}var fl=function(e){return!!e&&(function(e){return!(!e||e.length<3)&&(73===e[0]&&68===e[1]&&51===e[2]||255===e[0]&&(251===e[1]||250===e[1]))}(e)?"mp3":function(e){return!(!e||e.length<12)&&82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&87===e[8]&&65===e[9]&&86===e[10]&&69===e[11]}(e)?"wav":function(e){return!(!e||e.length<4)&&79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]}(e)?"oga":function(e){return!(!e||e.length<4)&&102===e[0]&&76===e[1]&&97===e[2]&&67===e[3]}(e)?"flac":!!function(e){return!(!e||e.length<8)&&(102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]||77===e[0]&&52===e[1]&&65===e[2]&&32===e[3])}(e)&&"m4a")},hl={decode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,i){return e(t,n).then((function(e){return ll.isAudioData(e)?("number"==typeof n.sampleRate&&(e=cl(e,n.sampleRate)),r(e)):i(new TypeError("Failed to decode audio data"))}),i)}))},resample:cl},pl=u,ml=Tu,yl={};function _l(e,t){"function"==typeof t&&(yl[e]=t)}_l("wav",ul.exports.decode);var bl={get:function(e){return yl[e]||null},set:_l,decode:function(e,t){var n=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e,0,16));return fl(e)||""}(e),r=yl[n];return"function"!=typeof r?Promise.reject(new TypeError("Decoder does not support the audio format: "+(n||"unknown"))):hl.decode(r,e,t).then((function(e){return pl.toAudioBuffer(e,ml)}))}},dl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var vl=s.exports,gl=pu,wl=gu,Ol=ku,kl=Tu,Cl=zu,Pl=Wu,El=Hu,Tl=es,Ml=as,Sl=cs,Dl=ms,Al=ds,jl=Os,xl=Ts,Il=js,Rl=Fs,Fl=Us,Nl=qs,Vl=Gs,Ll=Qs,zl=rl,Ul=ol,Bl=bl,$l=m.defineProp,ql=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return $l(n,"_impl",new vl.AudioContext(e)),n._impl.$destination=new wl(n,n._impl.getDestination()),n._impl.$listener=new Ol(n,n._impl.getListener()),n._impl.$onstatechange=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,gl),dl(t,[{key:"suspend",value:function(){return this._impl.suspend()}},{key:"resume",value:function(){return this._impl.resume()}},{key:"close",value:function(){return this._impl.close()}},{key:"createBuffer",value:function(e,t,n){return new kl({numberOfChannels:e,length:t,sampleRate:n})}},{key:"decodeAudioData",value:function(e,t,n){var r=Bl.decode(e,{sampleRate:this.sampleRate});return r.then(t,n),r}},{key:"createBufferSource",value:function(){return new Cl(this)}},{key:"createConstantSource",value:function(){return new Fl(this)}},{key:"createScriptProcessor",value:function(e,t,n){return new Pl(this,{bufferSize:e,numberOfInputChannels:t,numberOfOutputChannels:n})}},{key:"createAnalyser",value:function(){return new El(this)}},{key:"createGain",value:function(){return new Tl(this)}},{key:"createDelay",value:function(e){return new Ml(this,{maxDelayTime:e})}},{key:"createBiquadFilter",value:function(){return new Sl(this)}},{key:"createIIRFilter",value:function(e,t){return new Dl(this,{feedforward:e,feedback:t})}},{key:"createWaveShaper",value:function(){return new Al(this)}},{key:"createPanner",value:function(){return new jl(this)}},{key:"createSpatialPanner",value:function(){return new xl(this)}},{key:"createStereoPanner",value:function(){return new Il(this)}},{key:"createConvolver",value:function(){return new Rl(this)}},{key:"createChannelSplitter",value:function(e){return new Nl(this,{numberOfOutputs:e})}},{key:"createChannelMerger",value:function(e){return new Vl(this,{numberOfInputs:e})}},{key:"createDynamicsCompressor",value:function(){return new Ll(this)}},{key:"createOscillator",value:function(){return new zl(this)}},{key:"createPeriodicWave",value:function(e,t,n){return new Ul(this,{real:e,imag:t,constraints:n})}},{key:"destination",get:function(){return this._impl.$destination}},{key:"sampleRate",get:function(){return this._impl.getSampleRate()}},{key:"currentTime",get:function(){return this._impl.getCurrentTime()}},{key:"listener",get:function(){return this._impl.$listener}},{key:"state",get:function(){return this._impl.getState()}},{key:"onstatechange",get:function(){return this._impl.$onstatechange},set:function(e){this._impl.replaceEventListener("statechange",this._impl.$onstatechange,e),this._impl.$onstatechange=e}}]),t}(),Wl=t.setImmediate||function(e){return setTimeout(e,0)},Xl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Gl=n,Yl=u,Hl=ql,Zl=Tu,Kl=Wl,Ql=m.defineProp,Jl=m,ec=Jl.toValidNumberOfChannels,tc=Jl.toValidSampleRate,nc=Jl.toNumber,rc=Tn.RUNNING,ic=Tn.SUSPENDED,ac=Tn.CLOSED;function oc(){this._suspendResolve(),this._suspendedTime=1/0,this._suspendPromise=this._suspendResolve=null,this._impl.changeState(ic)}function uc(e){var t=this._length;e.channelData=e.channelData.map((function(e){return e.subarray(0,t)})),e.length=t;var n=Yl.toAudioBuffer(e,Zl);this._impl.changeState(ac),this._impl.dispatchEvent({type:"complete",renderedBuffer:n}),this._renderingResolve(n),this._renderingResolve=null}function sc(e){var t=this,n=this._audioData,r=n.length,i=n.channelData,a=e.blockSize,o=this._renderingIterations,u=this._writeIndex;e.changeState(rc),Kl((function s(){for(var l=(r-u)/a,c=0|Math.min(o,l),f=0;f<c;f++){if(t._suspendedTime<=e.currentTime)return t._writeIndex=u,oc.call(t);e.process(i,u),u+=a}t._writeIndex=u,u===r?uc.call(t,n):Kl(s)}))}var lc=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=ec(e),n=Math.max(0,0|n),r=tc(r);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{sampleRate:r,numberOfChannels:e}));return i._impl.$oncomplete=null,Ql(i,"_numberOfChannels",e),Ql(i,"_length",n),Ql(i,"_suspendedTime",1/0),Ql(i,"_suspendPromise",null),Ql(i,"_suspendResolve",null),Ql(i,"_renderingPromise",null),Ql(i,"_renderingResolve",null),Ql(i,"_renderingIterations",128),Ql(i,"_audioData",null),Ql(i,"_writeIndex",0),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Hl),Xl(t,[{key:"resume",value:function(){return this._impl.state===ac?Promise.reject(new TypeError("cannot startRendering when an OfflineAudioContext is closed")):null===this._renderingPromise?Promise.reject(new TypeError("cannot resume an offline context that has not started")):(this._impl.state===ic&&sc.call(this,this._impl),Promise.resolve())}},{key:"suspend",value:function(e){var t=this;return this._impl.state===ac?Promise.reject(new TypeError("cannot startRendering when an OfflineAudioContext is closed")):null!==this._suspendPromise?Promise.reject(new TypeError("cannot schedule more than one suspend")):(e=Math.max(0,nc(e)),this._suspendedTime=e,this._suspendPromise=new Promise((function(e){t._suspendResolve=e})),this._suspendPromise)}},{key:"close",value:function(){return Promise.reject(new TypeError("cannot close an OfflineAudioContext"))}},{key:"startRendering",value:function(){var e=this;return this._impl.state===ac?Promise.reject(new TypeError("cannot startRendering when an OfflineAudioContext is closed")):null!==this._renderingPromise?Promise.reject(new TypeError("cannot call startRendering more than once")):(this._renderingPromise=new Promise((function(t){var n=e._numberOfChannels,r=e._length,i=e.sampleRate,a=e._impl.blockSize;e._audioData=function(e,t,n,r){t=Math.ceil(t/r)*r;var i=Gl(e,(function(){return new Float32Array(t)}));return{numberOfChannels:e,length:t,sampleRate:n,channelData:i}}(n,r,i,a),e._renderingResolve=t,sc.call(e,e._impl)})),this._renderingPromise)}},{key:"length",get:function(){return this._length}},{key:"oncomplete",get:function(){return this._impl.$oncomplete},set:function(e){this._impl.replaceEventListener("complete",this._impl.$oncomplete,e),this._impl.$oncomplete=e}}]),t}(),cc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var fc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._view=new DataView(t),this._pos=0}return cc(e,[{key:"pcm8",value:function(e){e=128*(.5*(e=Math.max(-1,Math.min(e,1)))+.5),this._view.setUint8(this._pos,0|e),this._pos+=1}},{key:"pcm16",value:function(e){e=(e=Math.max(-1,Math.min(e,1)))<0?32768*e:32767*e,this._view.setInt16(this._pos,0|e,!0),this._pos+=2}},{key:"pcm32",value:function(e){e=(e=Math.max(-1,Math.min(e,1)))<0?2147483648*e:2147483647*e,this._view.setInt32(this._pos,0|e,!0),this._pos+=4}},{key:"pcm32f",value:function(e){this._view.setFloat32(this._pos,e,!0),this._pos+=4}}]),e}(),hc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var pc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buffer=t,this._pos=0}return hc(e,[{key:"pcm8",value:function(e){e=128*(.5*(e=Math.max(-1,Math.min(e,1)))+.5),this._buffer.writeUInt8(0|e,this._pos),this._pos+=1}},{key:"pcm16",value:function(e){e=(e=Math.max(-1,Math.min(e,1)))<0?32768*e:32767*e,this._buffer.writeInt16LE(0|e,this._pos),this._pos+=2}},{key:"pcm32",value:function(e){e=(e=Math.max(-1,Math.min(e,1)))<0?2147483648*e:2147483647*e,this._buffer.writeInt32LE(0|e,this._pos),this._pos+=4}},{key:"pcm32f",value:function(e){this._buffer.writeFloatLE(e,this._pos),this._pos+=4}}]),e}(),mc=t.Buffer,yc=mc?pc:fc,_c=mc?mc.alloc?mc.alloc:bc:dc;function bc(e){return new mc(e)}function dc(e){return new Uint8Array(e).buffer}var vc={create:function(e,t){var n=function(e,t){return t?32:e}(t.bitDepth,t.float),r=function(e,t){if(t)return"pcm32f";return"pcm"+e}(n,t.float),i=n>>3,a=t.channels,o=a*e*i;return 1===a?{encode:function(t){for(var n=_c(o),i=new yc(n),a=t[0],u=0,s=e;u<s;u++)i[r](a[u]);return n}}:2===a?{encode:function(t){for(var n=_c(o),i=new yc(n),a=t[0],u=t[1],s=0,l=e;s<l;s++)i[r](a[s]),i[r](u[s]);return n}}:{encode:function(t){for(var n=_c(o),i=new yc(n),u=0,s=e;u<s;u++)for(var l=0;l<a;l++)i[r](t[l][u]);return n}}}},gc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),wc=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};function Oc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Cc=n,Pc=bn,Ec=ql,Tc=vc,Mc=Wl,Sc=m,Dc=Sc.defaults,Ac=Sc.defineProp,jc=m,xc=jc.toValidSampleRate,Ic=jc.toValidBlockSize,Rc=jc.toValidNumberOfChannels,Fc=jc.toValidBitDepth,Nc=Tn.RUNNING,Vc=Tn.SUSPENDED,Lc=Tn.CLOSED,zc={write:function(){return!0}},Uc=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oc(this,t);var n=Dc(e.sampleRate,Pc.sampleRate),r=Dc(e.blockSize,Pc.blockSize),i=Dc(e.channels||e.numberOfChannels,Pc.numberOfChannels),a=Dc(e.bitDepth,Pc.bitDepth),o=e.float||e.floatingPoint;n=xc(n),r=Ic(r),i=Rc(i),a=Fc(a),o=!!o;var u=kc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{sampleRate:n,blockSize:r,numberOfChannels:i})),s={sampleRate:n,channels:i,bitDepth:a,float:o},l=Tc.create(r,s);return Ac(u,"_numberOfChannels",i),Ac(u,"_encoder",l),Ac(u,"_blockSize",r),Ac(u,"_stream",zc),Ac(u,"_isPlaying",!1),Ac(u,"_format",s),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ec),gc(t,[{key:"pipe",value:function(e){return this._stream=e,e}},{key:"resume",value:function(){return this.state===Vc&&this._resume(),wc(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resume",this).call(this)}},{key:"suspend",value:function(){return this.state===Nc&&this._suspend(),wc(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"suspend",this).call(this)}},{key:"close",value:function(){return this.state!==Lc&&this._close(),wc(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"close",this).call(this)}},{key:"_resume",value:function(){var e=this,t=this.currentTime,n=Date.now(),r=this._encoder,i=this._impl,a=Cc(this._numberOfChannels,(function(){return new Float32Array(e._blockSize)}));this._isPlaying=!0,Mc((function o(){if(e._isPlaying){if(i.currentTime-t<(Date.now()-n)/1e3+.1){i.process(a,0);var u=r.encode(a);if(!e._stream.write(u))return void e._stream.once("drain",o)}setTimeout(o,0)}}))}},{key:"_suspend",value:function(){this._isPlaying=!1}},{key:"_close",value:function(){this._suspend(),null!==this._stream&&(this._stream=null)}},{key:"numberOfChannels",get:function(){return this._impl.numberOfChannels}},{key:"blockSize",get:function(){return this._impl.blockSize}},{key:"format",get:function(){return this._format}}]),t}(),Bc={exports:{}};!function(e){function t(e,t){if(t=t||{},null===(e=function(e){var t={};if("number"!=typeof e.sampleRate)return null;if(!Array.isArray(e.channelData))return null;if(!(e.channelData[0]instanceof Float32Array))return null;return t.numberOfChannels=e.channelData.length,t.length=0|e.channelData[0].length,t.sampleRate=0|e.sampleRate,t.channelData=e.channelData,t}(e)))throw new TypeError("Invalid AudioData");var n=!(!t.floatingPoint&&!t.float),r=n?32:0|t.bitDepth||16,i=r>>3,a=e.length*e.numberOfChannels*i,o=new DataView(new Uint8Array(44+a).buffer),u=function(e){var t=0;return{int16:function(n){e.setInt16(t,n,!0),t+=2},uint16:function(n){e.setUint16(t,n,!0),t+=2},uint32:function(n){e.setUint32(t,n,!0),t+=4},string:function(n){for(var r=0,i=n.length;r<i;r++)e.setUint8(t++,n.charCodeAt(r))},pcm8:function(n){n=255*(.5*(n=Math.max(-1,Math.min(n,1)))+.5),n=0|Math.round(n),e.setUint8(t,n,!0),t+=1},pcm8s:function(n){n=Math.round(128*n)+128,n=Math.max(0,Math.min(n,255)),e.setUint8(t,n,!0),t+=1},pcm16:function(n){n=(n=Math.max(-1,Math.min(n,1)))<0?32768*n:32767*n,n=0|Math.round(n),e.setInt16(t,n,!0),t+=2},pcm16s:function(n){n=Math.round(32768*n),n=Math.max(-32768,Math.min(n,32767)),e.setInt16(t,n,!0),t+=2},pcm24:function(n){n=(n=Math.max(-1,Math.min(n,1)))<0?16777216+8388608*n:8388607*n;var r=(n=0|Math.round(n))>>0&255,i=n>>8&255,a=n>>16&255;e.setUint8(t+0,r),e.setUint8(t+1,i),e.setUint8(t+2,a),t+=3},pcm24s:function(n){n=Math.round(8388608*n);var r=(n=Math.max(-8388608,Math.min(n,8388607)))>>0&255,i=n>>8&255,a=n>>16&255;e.setUint8(t+0,r),e.setUint8(t+1,i),e.setUint8(t+2,a),t+=3},pcm32:function(n){n=(n=Math.max(-1,Math.min(n,1)))<0?2147483648*n:2147483647*n,n=0|Math.round(n),e.setInt32(t,n,!0),t+=4},pcm32s:function(n){n=Math.round(2147483648*n),n=Math.max(-2147483648,Math.min(n,2147483647)),e.setInt32(t,n,!0),t+=4},pcm32f:function(n){e.setFloat32(t,n,!0),t+=4}}}(o),s={formatId:n?3:1,floatingPoint:n,numberOfChannels:e.numberOfChannels,sampleRate:e.sampleRate,bitDepth:r};!function(e,t,n){var r=t.bitDepth>>3;e.string("RIFF"),e.uint32(n),e.string("WAVE"),e.string("fmt "),e.uint32(16),e.uint16(t.floatingPoint?3:1),e.uint16(t.numberOfChannels),e.uint32(t.sampleRate),e.uint32(t.sampleRate*t.numberOfChannels*r),e.uint16(t.numberOfChannels*r),e.uint16(t.bitDepth)}(u,s,o.buffer.byteLength-8);var l=function(e,t,n,r,i){var a=t.bitDepth,o=t.floatingPoint?"f":i.symmetric?"s":"",u="pcm"+a+o;if(!e[u])return new TypeError("Not supported bit depth: "+a);var s=e[u].bind(e),l=t.numberOfChannels,c=r.channelData;e.string("data"),e.uint32(n);for(var f=0,h=r.length;f<h;f++)for(var p=0;p<l;p++)s(c[p][f])}(u,s,a,e,t);if(l instanceof Error)throw l;return o.buffer}e.exports.encode=function(e,n){return new Promise((function(r){r(t(e,n))}))},e.exports.encode.sync=t}(Bc);var $c=u;var qc={encode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $c.isAudioData(t)||(t=$c.toAudioData(t)),e(t,n)}},Wc={};function Xc(e,t){"function"==typeof t&&(Wc[e]=t)}Xc("wav",Bc.exports.encode);var Gc={get:function(e){return Wc[e]||null},set:Xc,encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type||"wav",r=Wc[n];return"function"!=typeof r?Promise.reject(new TypeError("Encoder does not support the audio format: "+n)):qc.encode(r,e,t)}},Yc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Hc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Kc=n,Qc=bn,Jc=ql,ef=Gc,tf=m,nf=tf.defaults,rf=tf.defineProp,af=m,of=af.toValidSampleRate,uf=af.toValidBlockSize,sf=af.toValidNumberOfChannels,lf=af.toValidBitDepth,cf=af.toAudioTime,ff=Tn.RUNNING,hf=Tn.SUSPENDED,pf=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Hc(this,t);var n=nf(e.sampleRate,Qc.sampleRate),r=nf(e.blockSize,Qc.blockSize),i=nf(e.channels||e.numberOfChannels,Qc.numberOfChannels),a=nf(e.bitDepth,Qc.bitDepth),o=e.float||e.floatingPoint;n=of(n),r=uf(r),i=sf(i),a=lf(a),o=!!o;var u=Zc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{sampleRate:n,blockSize:r,numberOfChannels:i}));return rf(u,"_format",{sampleRate:n,channels:i,bitDepth:a,float:o}),rf(u,"_rendered",[]),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Jc),Yc(t,[{key:"processTo",value:function(e){var t=(e=cf(e))-this.currentTime;if(!(t<=0)){var n=this._impl,r=n.blockSize,i=Math.ceil(t*this.sampleRate/r),a=r*i,o=this._format.channels,u=Kc(o,(function(){return new Float32Array(a)}));n.changeState(ff);for(var s=0;s<i;s++)n.process(u,s*r);this._rendered.push(u),n.changeState(hf)}}},{key:"exportAsAudioData",value:function(){var e=this._format.channels,t=this._rendered.reduce((function(e,t){return e+t[0].length}),0),n=this._format.sampleRate,r=Kc(e,(function(){return new Float32Array(t)})),i={numberOfChannels:e,length:t,sampleRate:n,channelData:r},a=0;return this._rendered.forEach((function(t){for(var n=0;n<e;n++)r[n].set(t[n],a);a+=t[0].length})),i}},{key:"encodeAudioData",value:function(e,t){return t=Object.assign({},this._format,t),ef.encode(e,t)}},{key:"numberOfChannels",get:function(){return this._impl.numberOfChannels}},{key:"blockSize",get:function(){return this._impl.blockSize}},{key:"format",get:function(){return this._format}}]),t}(),mf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),yf=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};function _f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var df=bn,vf=ql,gf=m,wf=gf.defaults,Of=gf.defineProp,kf=m,Cf=kf.toValidBlockSize,Pf=kf.toValidNumberOfChannels,Ef=kf.toPowerOfTwo,Tf=[],Mf=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_f(this,t);var n=e.destination||e.context.destination,r=n.context,i=r.sampleRate,a=wf(e.blockSize,df.blockSize),o=wf(e.numberOfChannels,df.numberOfChannels),u=wf(e.bufferSize,1024);a=Cf(a),o=Pf(o),u=Ef(u),u=Math.max(256,Math.min(u,16384));var s=bf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{sampleRate:i,blockSize:a,numberOfChannels:o})),l=r.createScriptProcessor(u,0,o),c=Tf[o]||Tf[0];return l.onaudioprocess=c(s._impl,o,u),Of(s,"_originalContext",r),Of(s,"_destination",n),Of(s,"_processor",l),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vf),mf(t,[{key:"resume",value:function(){return this._processor&&this._processor.connect(this._destination),yf(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resume",this).call(this)}},{key:"suspend",value:function(){return this._processor&&this._processor.disconnect(),yf(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"suspend",this).call(this)}},{key:"close",value:function(){return this._processor&&(this._processor.disconnect(),this._processor=null),yf(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"close",this).call(this)}},{key:"originalContext",get:function(){return this._originalContext}}]),t}();Tf[0]=function(e,t,n){var r=e.blockSize,i=n/r,a=new Array(t);return function(n){for(var o=n.outputBuffer,u=0;u<t;u++)a[u]=o.getChannelData(u);for(var s=0;s<i;s++)e.process(a,s*r)}},Tf[1]=function(e,t,n){var r=e.blockSize,i=n/r;return function(t){for(var n=[t.outputBuffer.getChannelData(0)],a=0;a<i;a++)e.process(n,a*r)}},Tf[2]=function(e,t,n){var r=e.blockSize,i=n/r;return function(t){for(var n=t.outputBuffer,a=[n.getChannelData(0),n.getChannelData(1)],o=0;o<i;o++)e.process(a,o*r)}};var Sf=Mf,Df=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Af=Ru,jf=m.defineProp,xf={OfflineAudioContext:lc,StreamAudioContext:Uc,RenderingAudioContext:pf,WebAudioContext:Sf,api:{AnalyserNode:Hu,AudioBuffer:Tu,AudioBufferSourceNode:zu,AudioDestinationNode:gu,AudioListener:ku,AudioNode:bu,AudioParam:Ru,AudioScheduledSourceNode:ju,BaseAudioContext:ql,BiquadFilterNode:cs,ChannelMergerNode:Gs,ChannelSplitterNode:qs,ConstantSourceNode:Us,ConvolverNode:Fs,DelayNode:as,DynamicsCompressorNode:Qs,EventTarget:pu,GainNode:es,IIRFilterNode:ms,OscillatorNode:rl,PannerNode:Os,PeriodicWave:ol,ScriptProcessorNode:Wu,SpatialListener:function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jf(this,"_context",t),jf(this,"_impl",n),this._impl.$positionX=new Af(t,this._impl.getPositionX()),this._impl.$positionY=new Af(t,this._impl.getPositionY()),this._impl.$positionZ=new Af(t,this._impl.getPositionZ()),this._impl.$forwardX=new Af(t,this._impl.getForwardX()),this._impl.$forwardY=new Af(t,this._impl.getForwardY()),this._impl.$forwardZ=new Af(t,this._impl.getForwardZ()),this._impl.$upX=new Af(t,this._impl.getUpX()),this._impl.$upY=new Af(t,this._impl.getUpY()),this._impl.$upZ=new Af(t,this._impl.getUpZ())}return Df(e,[{key:"positionX",get:function(){return this._impl.$positionX}},{key:"positionY",get:function(){return this._impl.$positionY}},{key:"positionZ",get:function(){return this._impl.$positionZ}},{key:"forwardX",get:function(){return this._impl.$forwardX}},{key:"forwardY",get:function(){return this._impl.$forwardY}},{key:"forwardZ",get:function(){return this._impl.$forwardZ}},{key:"upX",get:function(){return this._impl.$upX}},{key:"upY",get:function(){return this._impl.$upY}},{key:"upZ",get:function(){return this._impl.$upZ}}]),e}(),SpatialPannerNode:Ts,StereoPannerNode:js,WaveShaperNode:ds},impl:s.exports,decoder:bl,encoder:Gc},If=Object.freeze(Object.assign(Object.create(null),xf,{[Symbol.toStringTag]:"Module",default:xf}));export{If as i};
