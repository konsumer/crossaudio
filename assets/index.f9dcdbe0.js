var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,c=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&l(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&l(e,n,t[n]);return e},s=(e,r)=>t(e,n(r)),i=(e,t)=>{var n={};for(var l in e)a.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&r)for(var l of r(e))t.indexOf(l)<0&&o.call(e,l)&&(n[l]=e[l]);return n};import u,{createContext as p,useState as m,useRef as d,useEffect as h,useContext as f}from"react";import{e as v,c as y,R as w}from"./vendor.e6a0473d.js";let E;const b={},g=function(e,t){if(!t||0===t.length)return e();if(void 0===E){const e=document.createElement("link").relList;E=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in b)return;b[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":E,t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e()))},O="undefined"!=typeof process&&process.versions&&process.versions.node;class k{constructor(e){this.values=e,this.watcher=v(),Object.keys(e).forEach((e=>{Object.defineProperty(this,e,{get:()=>this.values[e],set:t=>{this.values[e]=t,this.watcher.emit(e,t)}})}))}on(e,t){this.watcher.on(e,t)}off(e,t){this.watcher.off(e,t)}}const j=p(),x=e=>{var t=e,{synth:n,params:r}=t,a=i(t,["synth","params"]);const[o,l]=m(r),p=d(new k(r));h((()=>{!async function(e,t){let n,r;if(O){const a=(await g((()=>import("./index.eabf2145.js").then((function(e){return e.i}))),["/crossaudio/assets/index.eabf2145.js","/crossaudio/assets/___vite-browser-external_commonjs-proxy.e3d36f2f.js","/crossaudio/assets/vendor.e6a0473d.js"])).StreamAudioContext;n=new(await g((()=>import("./index.e800aa48.js").then((function(e){return e.i}))),["/crossaudio/assets/index.e800aa48.js","/crossaudio/assets/___vite-browser-external_commonjs-proxy.e3d36f2f.js","/crossaudio/assets/vendor.e6a0473d.js"])),r=new a,r.pipe(n),r.resume(),e(r,t)}else window.addEventListener("click",(()=>{r||(r=new AudioContext,r.resume(),e(r,t))}))}(n,p.current)}),[]);return u.createElement(j.Provider,s(c({},a),{value:[o,e=>{Object.keys(r).forEach((t=>{p.current[t]=e[t]})),l(e)}]}))};const P=()=>{const[e,t]=f(j),n=n=>r=>t(s(c({},e),{[n]:parseInt(r.target.value)}));return u.createElement("div",{className:"synth"},u.createElement("div",null,u.createElement("label",null,"power:"),u.createElement("input",{type:"checkbox",onChange:n=>t(s(c({},e),{power:n.target.checked})),checked:e.power})),u.createElement("div",null,u.createElement("label",null,"note:"),u.createElement("input",{type:"range",value:e.note,onChange:n("note"),min:0,max:127}),u.createElement("div",{className:"value"},e.note)),u.createElement("div",null,u.createElement("label",null,"cutoff:"),u.createElement("input",{type:"range",value:e.cutoff,onChange:n("cutoff"),min:0,max:127}),u.createElement("div",{className:"value"},e.cutoff)),u.createElement("div",null,u.createElement("label",null,"resonance:"),u.createElement("input",{type:"range",value:e.resonance,onChange:n("resonance"),min:0,max:127}),u.createElement("div",{className:"value"},e.resonance)))},_={};function C(e){var t=e,{components:n}=t,r=i(t,["components"]);return y("wrapper",s(c(c({},_),r),{components:n,mdxType:"MDXLayout"}),y("h1",null,"crossaudio"),y("h3",null,"Quick Start:"),y("pre",null,y("code",c({parentName:"pre"},{className:"language-sh"}),"npx coreaudio mysynth.js\n")),y("hr",null),y("p",null,"Read more on ",y("a",c({parentName:"p"},{href:"https://github.com/konsumer/crossaudio/wiki/Getting-Started"}),"our wiki"),"."),y("hr",null),y("p",null,"Here is a quick demo of how it works in react:"),y(P,{mdxType:"DemoSynth"}),y("p",null,y("a",c({parentName:"p"},{href:"https://github.com/konsumer/crossaudio/blob/main/packages/site/src/synth.js"}),"source")),y("hr",null),y("p",null,"The same synth code can also be used in plain javascript in the browser, and in a headless CLI or graphical app, without a browser."))}C.isMDXComponent=!0;const L=e=>440*Math.pow(2,(e-69)/12),N=e=>1e-4+e/127*999.9999;w.render(u.createElement(u.StrictMode,null,u.createElement(x,{synth:function(e,t){const n=e.createOscillator();n.frequency.value=L(t.note),t.on("note",(e=>{n.frequency.value=L(e)}));const r=e.createBiquadFilter();r.type="lowpass",r.frequency.value=L(t.cutoff),r.Q.value=N(t.resonance),t.on("cutoff",(e=>{r.frequency.value=L(e)})),t.on("resonance",(e=>{r.Q.value=N(e)}));const a=e.createGain();a.gain.value=t.power?1:0,t.on("power",(e=>{a.gain.value=e?1:0})),n.connect(r),r.connect(a),a.connect(e.destination),n.start(0)},params:{cutoff:48,resonance:0,power:!1,note:48}},u.createElement(C,null))),document.getElementById("root"));
