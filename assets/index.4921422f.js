var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,l=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&s(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&s(e,n,t[n]);return e},c=(e,r)=>t(e,n(r)),i=(e,t)=>{var n={};for(var s in e)a.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&r)for(var s of r(e))t.indexOf(s)<0&&o.call(e,s)&&(n[s]=e[s]);return n};import{r as u,R as p,c as m,a as h}from"./vendor.8333cade.js";let d;const f={},v=function(e,t){if(!t||0===t.length)return e();if(void 0===d){const e=document.createElement("link").relList;d=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in f)return;f[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":d,t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e()))},y="undefined"!=typeof process&&process.versions&&process.versions.node;class b{constructor(e){var t;this.values=e,this.watcher=(t||(t={}),t._subs=[],t._paused=!1,t._pending=[],t.on=function(e,n){t._subs[e]=t._subs[e]||[],t._subs[e].push(n)},t.off=function(e,n){if(t._subs[e])for(const r in t._subs[e])if(t._subs[e][r]===n){t._subs[e].splice(r,1);break}},t.emit=function(e){if(!t._subs[e])return;const n=Array.prototype.slice.call(arguments,1);if(t._paused)return t._pending[e]=t._pending[e]||[],void t._pending[e].push(n);for(const r in t._subs[e])t._subs[e][r].apply(t,n)},t),Object.keys(e).forEach((e=>{Object.defineProperty(this,e,{get:()=>this.values[e],set:t=>{this.values[e]=t,this.watcher.emit(e,t)}})}))}on(e,t){this.watcher.on(e,t)}off(e,t){this.watcher.off(e,t)}}const w=u.exports.createContext(),E=e=>{var t=e,{synth:n,params:r}=t,a=i(t,["synth","params"]);const[o,s]=u.exports.useState(r),m=u.exports.useRef(new b(r));u.exports.useEffect((()=>{!async function(e,t){let n,r;if(y){const a=(await v((()=>import("./index.59cf6db6.js").then((function(e){return e.i}))),["/crossaudio/assets/index.59cf6db6.js","/crossaudio/assets/___vite-browser-external_commonjs-proxy.f242bfbd.js","/crossaudio/assets/vendor.8333cade.js"])).StreamAudioContext;n=new((await v((()=>import("./index.9570897c.js").then((function(e){return e.i}))),["/crossaudio/assets/index.9570897c.js","/crossaudio/assets/___vite-browser-external_commonjs-proxy.f242bfbd.js","/crossaudio/assets/vendor.8333cade.js"])).default),r=new a,r.pipe(n),r.resume(),e(r,t)}else window.addEventListener("click",(()=>{r||(r=new AudioContext,r.resume(),e(r,t))}))}(n,m.current)}),[]);return p.createElement(w.Provider,c(l({},a),{value:[o,e=>{Object.keys(r).forEach((t=>{m.current[t]=e[t]})),s(e)}]}))};const g=()=>{const[e,t]=u.exports.useContext(w),n=n=>r=>t(c(l({},e),{[n]:parseInt(r.target.value)}));return p.createElement("div",{className:"synth"},p.createElement("div",null,p.createElement("label",null,"power:"),p.createElement("input",{type:"checkbox",onChange:n=>t(c(l({},e),{power:n.target.checked})),checked:e.power})),p.createElement("div",null,p.createElement("label",null,"note:"),p.createElement("input",{type:"range",value:e.note,onChange:n("note"),min:0,max:127}),p.createElement("div",{className:"value"},e.note)),p.createElement("div",null,p.createElement("label",null,"cutoff:"),p.createElement("input",{type:"range",value:e.cutoff,onChange:n("cutoff"),min:0,max:127}),p.createElement("div",{className:"value"},e.cutoff)),p.createElement("div",null,p.createElement("label",null,"resonance:"),p.createElement("input",{type:"range",value:e.resonance,onChange:n("resonance"),min:0,max:127}),p.createElement("div",{className:"value"},e.resonance)))},_={};function x(e){var t=e,{components:n}=t,r=i(t,["components"]);return m("wrapper",c(l(l({},_),r),{components:n,mdxType:"MDXLayout"}),m("h1",null,"crossaudio"),m("h3",null,"Quick Start:"),m("pre",null,m("code",l({parentName:"pre"},{className:"language-sh"}),"npx coreaudio mysynth.js\n")),m("hr",null),m("p",null,"Read more on ",m("a",l({parentName:"p"},{href:"https://github.com/konsumer/crossaudio/wiki/Getting-Started"}),"our wiki"),"."),m("hr",null),m("p",null,"Here is a quick demo of how it works in react:"),m(g,{mdxType:"DemoSynth"}),m("p",null,m("a",l({parentName:"p"},{href:"https://github.com/konsumer/crossaudio/blob/main/packages/site/src/synth.js"}),"source")),m("hr",null),m("p",null,"The same synth code can also be used in plain javascript in the browser, and in a headless CLI or graphical app, without a browser."),m("hr",null),m("p",null,"Check out these visualization demos:"),m("ul",null,m("li",{parentName:"ul"},m("a",l({parentName:"li"},{href:"bargraph.html"}),"bargraph")),m("li",{parentName:"ul"},m("a",l({parentName:"li"},{href:"spectrograph.html"}),"spectrograph")),m("li",{parentName:"ul"},m("a",l({parentName:"li"},{href:"oscilloscope.html"}),"oscilloscope"))),m("p",null,"These are all plain javascript (if you prefer that) but you can also use them in react."))}x.isMDXComponent=!0;const k=e=>440*Math.pow(2,(e-69)/12),O=e=>1e-4+e/127*999.9999;h.render(p.createElement(p.StrictMode,null,p.createElement(E,{synth:function(e,t){const n=e.createOscillator();n.frequency.value=k(t.note),n.type="sawtooth",n.start(0),t.on("note",(e=>{n.frequency.value=k(e)}));const r=e.createBiquadFilter();r.type="lowpass",r.frequency.value=k(t.cutoff),r.Q.value=O(t.resonance),t.on("cutoff",(e=>{r.frequency.value=k(e)})),t.on("resonance",(e=>{r.Q.value=O(e)}));const a=e.createGain();a.gain.value=t.power?1:0,t.on("power",(e=>{a.gain.value=e?1:0})),n.connect(r),r.connect(a),a.connect(e.destination)},params:{cutoff:48,resonance:2,power:!1,note:48}},p.createElement(x,null))),document.getElementById("root"));
