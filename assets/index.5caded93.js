var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,c=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&s(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&s(e,n,t[n]);return e},l=(e,r)=>t(e,n(r)),i=(e,t)=>{var n={};for(var s in e)a.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&r)for(var s of r(e))t.indexOf(s)<0&&o.call(e,s)&&(n[s]=e[s]);return n};import{e as u,r as p,R as m,c as d,a as f}from"./vendor.118b6264.js";let h;const v={},y=function(e,t){if(!t||0===t.length)return e();if(void 0===h){const e=document.createElement("link").relList;h=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in v)return;v[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":h,t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e()))},w="undefined"!=typeof process&&process.versions&&process.versions.node;class E{constructor(e){this.values=e,this.watcher=u(),Object.keys(e).forEach((e=>{Object.defineProperty(this,e,{get:()=>this.values[e],set:t=>{this.values[e]=t,this.watcher.emit(e,t)}})}))}on(e,t){this.watcher.on(e,t)}off(e,t){this.watcher.off(e,t)}}const b=p.exports.createContext(),g=e=>{var t=e,{synth:n,params:r}=t,a=i(t,["synth","params"]);const[o,s]=p.exports.useState(r),u=p.exports.useRef(new E(r));p.exports.useEffect((()=>{!async function(e,t){let n,r;if(w){const a=(await y((()=>import("./index.385ac89e.js").then((function(e){return e.i}))),["/crossaudio/assets/index.385ac89e.js","/crossaudio/assets/___vite-browser-external_commonjs-proxy.0eb05b8b.js","/crossaudio/assets/vendor.118b6264.js"])).StreamAudioContext;n=new(await y((()=>import("./index.a7f93e7d.js").then((function(e){return e.i}))),["/crossaudio/assets/index.a7f93e7d.js","/crossaudio/assets/___vite-browser-external_commonjs-proxy.0eb05b8b.js","/crossaudio/assets/vendor.118b6264.js"])),r=new a,r.pipe(n),r.resume(),e(r,t)}else window.addEventListener("click",(()=>{r||(r=new AudioContext,r.resume(),e(r,t))}))}(n,u.current)}),[]);return m.createElement(b.Provider,l(c({},a),{value:[o,e=>{Object.keys(r).forEach((t=>{u.current[t]=e[t]})),s(e)}]}))};const x=()=>{const[e,t]=p.exports.useContext(b),n=n=>r=>t(l(c({},e),{[n]:parseInt(r.target.value)}));return m.createElement("div",{className:"synth"},m.createElement("div",null,m.createElement("label",null,"power:"),m.createElement("input",{type:"checkbox",onChange:n=>t(l(c({},e),{power:n.target.checked})),checked:e.power})),m.createElement("div",null,m.createElement("label",null,"note:"),m.createElement("input",{type:"range",value:e.note,onChange:n("note"),min:0,max:127}),m.createElement("div",{className:"value"},e.note)),m.createElement("div",null,m.createElement("label",null,"cutoff:"),m.createElement("input",{type:"range",value:e.cutoff,onChange:n("cutoff"),min:0,max:127}),m.createElement("div",{className:"value"},e.cutoff)),m.createElement("div",null,m.createElement("label",null,"resonance:"),m.createElement("input",{type:"range",value:e.resonance,onChange:n("resonance"),min:0,max:127}),m.createElement("div",{className:"value"},e.resonance)))},O={};function k(e){var t=e,{components:n}=t,r=i(t,["components"]);return d("wrapper",l(c(c({},O),r),{components:n,mdxType:"MDXLayout"}),d("h1",null,"crossaudio"),d("h3",null,"Quick Start:"),d("pre",null,d("code",c({parentName:"pre"},{className:"language-sh"}),"npx coreaudio mysynth.js\n")),d("hr",null),d("p",null,"Read more on ",d("a",c({parentName:"p"},{href:"https://github.com/konsumer/crossaudio/wiki/Getting-Started"}),"our wiki"),"."),d("hr",null),d("p",null,"Here is a quick demo of how it works in react:"),d(x,{mdxType:"DemoSynth"}),d("p",null,d("a",c({parentName:"p"},{href:"https://github.com/konsumer/crossaudio/blob/main/packages/site/src/synth.js"}),"source")),d("hr",null),d("p",null,"The same synth code can also be used in plain javascript in the browser, and in a headless CLI or graphical app, without a browser."))}k.isMDXComponent=!0;const j=e=>440*Math.pow(2,(e-69)/12),C=e=>1e-4+e/127*999.9999;f.render(m.createElement(m.StrictMode,null,m.createElement(g,{synth:function(e,t){const n=e.createOscillator();n.frequency.value=j(t.note),n.type="sawtooth",n.start(0),t.on("note",(e=>{n.frequency.value=j(e)}));const r=e.createBiquadFilter();r.type="lowpass",r.frequency.value=j(t.cutoff),r.Q.value=C(t.resonance),t.on("cutoff",(e=>{r.frequency.value=j(e)})),t.on("resonance",(e=>{r.Q.value=C(e)}));const a=e.createGain();a.gain.value=t.power?1:0,t.on("power",(e=>{a.gain.value=e?1:0})),n.connect(r),r.connect(a),a.connect(e.destination)},params:{cutoff:48,resonance:2,power:!1,note:48}},m.createElement(k,null))),document.getElementById("root"));
